<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GPA ê³„ì‚°ê¸° - CalcHub | í•™ì  ë° í‰ì  ê³„ì‚°</title>
    <meta name="description" content="GPA ê³„ì‚°ê¸°ë¡œ í•™ì ê³¼ í‰ì ì„ ê°„í¸í•˜ê²Œ ê³„ì‚°í•˜ì„¸ìš”. í•œêµ­ì–´ ì„±ì  ì…ë ¥ ìë™ ì¸ì‹.">
    <meta name="keywords" content="GPAê³„ì‚°ê¸°, í•™ì ê³„ì‚°, í‰ì ê³„ì‚°, ì„±ì ê³„ì‚°">
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/common.css">
</head>
<body>
    <!-- ê³µí†µ í—¤ë” -->
    <header class="header">
        <div class="header-content">
            <a href="../index.html" class="logo">
                <div class="logo-icon">ğŸ§®</div>
                CalcHub
            </a>
            <nav class="nav-links">
                <a href="../index.html#calculators" class="nav-link">ê³„ì‚°ê¸°</a>
                <a href="../about.html" class="nav-link">ì†Œê°œ</a>
                <a href="../contact.html" class="nav-link">ë¬¸ì˜</a>
            </nav>
        </div>
    </header>

    <div class="container">
        <div class="calculator-card">
            <!-- ê³„ì‚°ê¸° í—¤ë” -->
            <div class="calculator-header">
                <h1 class="calculator-title">ğŸ“ GPA ê³„ì‚°ê¸°</h1>
                <p class="calculator-subtitle">í•™ì ê³¼ í‰ì ì„ ê°„í¸í•˜ê²Œ ê³„ì‚°í•˜ì„¸ìš”</p>
            </div>

            <!-- ê³„ì‚°ê¸° ë³¸ë¬¸ -->
            <div class="calculator-body">
                <!-- ì…ë ¥ ì„¹ì…˜ -->
                <div class="input-section">
                    <h2 class="section-title">ğŸ“š ì„±ì  ì…ë ¥</h2>
                    <div class="input-grid">
                        <div class="input-group">
                            <label for="subjectData" class="input-label">ê³¼ëª©ë³„ ì„±ì ê³¼ í•™ì </label>
                            <textarea id="subjectData" class="input-field" rows="4" 
                                placeholder="ì˜ˆ:&#10;ìˆ˜í•™ A+ 3í•™ì &#10;ì˜ì–´ B 2í•™ì &#10;ë¬¼ë¦¬ A 3í•™ì "></textarea>
                        </div>
                        <div class="input-group">
                            <label for="gradeSystem" class="input-label">í•™ì  ì²´ê³„</label>
                            <select id="gradeSystem" class="input-field" onchange="updateGradeInfo()">
                                <option value="4.5">4.5 ë§Œì  (A+ = 4.5)</option>
                                <option value="4.0">4.0 ë§Œì  (A+ = 4.0)</option>
                                <option value="100">100ì  ë§Œì </option>
                            </select>
                        </div>
                    </div>
                    <button onclick="calculate()" class="btn btn-primary">GPA ê³„ì‚°í•˜ê¸°</button>
                </div>

                <!-- ê²°ê³¼ ì„¹ì…˜ -->
                <div id="resultSection" class="result-section" style="display: none;">
                    <h2 class="result-title">ğŸ“‹ ê³„ì‚° ê²°ê³¼</h2>
                    <div class="result-grid">
                        <div class="result-item">
                            <div class="result-label">ì´ í‰ì  (GPA)</div>
                            <div id="totalGPA" class="result-value highlight">-</div>
                        </div>
                        <div class="result-item">
                            <div class="result-label">ì´ ì´ìˆ˜ í•™ì </div>
                            <div id="totalCredits" class="result-value">-</div>
                        </div>
                        <div class="result-item">
                            <div class="result-label">í‰ì  ë“±ê¸‰</div>
                            <div id="gradeLevel" class="result-value">-</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // í•™ì  ì²´ê³„ ì •ì˜
        const gradeSystems = {
            '4.5': {
                'A+': 4.5, 'A': 4.0, 'B+': 3.5, 'B': 3.0, 'C+': 2.5, 'C': 2.0, 'D+': 1.5, 'D': 1.0, 'F': 0
            },
            '4.0': {
                'A+': 4.0, 'A': 4.0, 'A-': 3.7, 'B+': 3.3, 'B': 3.0, 'B-': 2.7, 'C+': 2.3, 'C': 2.0, 'C-': 1.7, 'D+': 1.3, 'D': 1.0, 'F': 0
            },
            '100': {} // ìˆ«ì ì ìˆ˜ëŠ” ë³„ë„ ì²˜ë¦¬
        };

        // í•™ì  ì²´ê³„ ì •ë³´ ì—…ë°ì´íŠ¸
        function updateGradeInfo() {
            const system = document.getElementById('gradeSystem').value;
            const textarea = document.getElementById('subjectData');
            
            if (system === '100') {
                textarea.placeholder = 'ì˜ˆ:\nìˆ˜í•™ 95ì  3í•™ì \nì˜ì–´ 87ì  2í•™ì \në¬¼ë¦¬ 92ì  3í•™ì ';
            } else {
                textarea.placeholder = 'ì˜ˆ:\nìˆ˜í•™ A+ 3í•™ì \nì˜ì–´ B 2í•™ì \në¬¼ë¦¬ A 3í•™ì ';
            }
        }

        // ì„±ì  íŒŒì‹± í•¨ìˆ˜
        function parseGradeData(input) {
            if (!input) return [];
            
            const lines = input.trim().split('\n');
            const subjects = [];
            
            for (let line of lines) {
                line = line.trim();
                if (!line) continue;
                
                // ì •ê·œí‘œí˜„ì‹ìœ¼ë¡œ ê³¼ëª©ëª…, ì„±ì , í•™ì  ì¶”ì¶œ
                let match;
                
                // íŒ¨í„´ 1: "ê³¼ëª©ëª… ì„±ì  Ní•™ì " (ì˜ˆ: ìˆ˜í•™ A+ 3í•™ì )
                match = line.match(/(.+?)\s+([A-F][+-]?|\d+ì ?)\s*(\d+(?:\.\d+)?)\s*í•™ì /);
                if (match) {
                    subjects.push({
                        name: match[1].trim(),
                        grade: match[2].trim(),
                        credits: parseFloat(match[3])
                    });
                    continue;
                }
                
                // íŒ¨í„´ 2: "ê³¼ëª©ëª… Ní•™ì  ì„±ì " (ì˜ˆ: ìˆ˜í•™ 3í•™ì  A+)
                match = line.match(/(.+?)\s*(\d+(?:\.\d+)?)\s*í•™ì \s+([A-F][+-]?|\d+ì ?)/);
                if (match) {
                    subjects.push({
                        name: match[1].trim(),
                        grade: match[3].trim(),
                        credits: parseFloat(match[2])
                    });
                    continue;
                }
                
                // íŒ¨í„´ 3: ê°„ë‹¨í•œ í˜•íƒœ (ì˜ˆ: A+ 3, 95 3)
                match = line.match(/([A-F][+-]?|\d+ì ?)\s+(\d+(?:\.\d+)?)/);
                if (match) {
                    subjects.push({
                        name: `ê³¼ëª©${subjects.length + 1}`,
                        grade: match[1].trim(),
                        credits: parseFloat(match[2])
                    });
                    continue;
                }
            }
            
            return subjects;
        }

        // ì„±ì ì„ ì ìˆ˜ë¡œ ë³€í™˜
        function gradeToPoints(grade, system) {
            const systemData = gradeSystems[system];
            
            if (system === '100') {
                // ìˆ«ì ì ìˆ˜ ì²˜ë¦¬
                const score = parseFloat(grade.replace('ì ', ''));
                if (score >= 97) return 4.5;
                if (score >= 93) return 4.0;
                if (score >= 90) return 3.5;
                if (score >= 87) return 3.0;
                if (score >= 83) return 2.5;
                if (score >= 80) return 2.0;
                if (score >= 77) return 1.5;
                if (score >= 70) return 1.0;
                return 0;
            } else {
                return systemData[grade.toUpperCase()] || 0;
            }
        }

        // í‰ì ì„ ë“±ê¸‰ìœ¼ë¡œ ë³€í™˜
        function getGradeLevel(gpa) {
            if (gpa >= 4.0) return 'A ë“±ê¸‰ (ìš°ìˆ˜)';
            if (gpa >= 3.5) return 'B+ ë“±ê¸‰ (ì–‘í˜¸)';
            if (gpa >= 3.0) return 'B ë“±ê¸‰ (ë³´í†µ)';
            if (gpa >= 2.5) return 'C+ ë“±ê¸‰';
            if (gpa >= 2.0) return 'C ë“±ê¸‰';
            if (gpa >= 1.0) return 'D ë“±ê¸‰';
            return 'F ë“±ê¸‰';
        }

        // ê³„ì‚° í•¨ìˆ˜
        function calculate() {
            const subjectData = document.getElementById('subjectData').value;
            const gradeSystem = document.getElementById('gradeSystem').value;
            
            if (!subjectData.trim()) {
                alert('ì„±ì  ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”');
                return;
            }

            const subjects = parseGradeData(subjectData);
            
            if (subjects.length === 0) {
                alert('ì˜¬ë°”ë¥¸ ì„±ì  í˜•ì‹ìœ¼ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”');
                return;
            }

            let totalPoints = 0;
            let totalCredits = 0;

            for (let subject of subjects) {
                const points = gradeToPoints(subject.grade, gradeSystem);
                totalPoints += points * subject.credits;
                totalCredits += subject.credits;
            }

            if (totalCredits === 0) {
                alert('í•™ì ì´ 0ì´ê±°ë‚˜ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤');
                return;
            }

            const gpa = totalPoints / totalCredits;
            const maxGpa = gradeSystem === '4.5' ? 4.5 : 4.0;

            // ê²°ê³¼ í‘œì‹œ
            document.getElementById('totalGPA').textContent = `${gpa.toFixed(2)}/${maxGpa}`;
            document.getElementById('totalCredits').textContent = `${totalCredits}í•™ì `;
            document.getElementById('gradeLevel').textContent = getGradeLevel(gpa);
            
            document.getElementById('resultSection').style.display = 'block';
            document.getElementById('resultSection').classList.add('fade-in');
        }

        // ì—”í„°í‚¤ë¡œ ê³„ì‚°
        document.addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && e.target.tagName !== 'TEXTAREA') {
                calculate();
            }
        });

        // ì´ˆê¸°í™”
        window.onload = function() {
            updateGradeInfo();
        };
    </script>
</body>
</html>