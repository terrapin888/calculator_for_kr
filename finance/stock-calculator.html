<!DOCTYPE html>
<html lang="ko">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>ì£¼ì‹ ê³„ì‚°ê¸° - ìˆ˜ìµë¥ /ì†ìµ ìë™ ê³„ì‚° | ìŠ¤ë§ˆíŠ¸ íŒŒì‹±</title>
   <meta name="description" content="ì£¼ì‹ ê³„ì‚°ê¸°ë¡œ ìˆ˜ìµë¥ , ì†ìµ, ë°°ë‹¹ì„ ì‰½ê²Œ ê³„ì‚°í•˜ì„¸ìš”. ë§¤ìˆ˜ê°€ì™€ ë§¤ë„ê°€ë¥¼ ì…ë ¥í•˜ë©´ ìë™ìœ¼ë¡œ ìˆ˜ìµë¥ ì„ ê³„ì‚°í•©ë‹ˆë‹¤.">
   <style>
       * {
           margin: 0;
           padding: 0;
           box-sizing: border-box;
       }
       
       body {
           font-family: 'Malgun Gothic', -apple-system, BlinkMacSystemFont, sans-serif;
           background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
           min-height: 100vh;
           padding: 20px;
       }
       
       .container {
           max-width: 1200px;
           margin: 0 auto;
           background: white;
           border-radius: 20px;
           box-shadow: 0 25px 50px rgba(0,0,0,0.15);
           overflow: hidden;
           animation: slideUp 0.6s ease-out;
       }
       
       @keyframes slideUp {
           from { opacity: 0; transform: translateY(30px); }
           to { opacity: 1; transform: translateY(0); }
       }
       
       .header {
           background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
           color: white;
           padding: 40px 30px;
           text-align: center;
           position: relative;
           overflow: hidden;
       }
       
       .header::before {
           content: '';
           position: absolute;
           top: -50%;
           left: -50%;
           width: 200%;
           height: 200%;
           background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
           animation: pulse 4s ease-in-out infinite;
       }
       
       @keyframes pulse {
           0%, 100% { transform: scale(1); }
           50% { transform: scale(1.1); }
       }
       
       .header h1 {
           font-size: 2.5rem;
           margin-bottom: 10px;
           position: relative;
           z-index: 1;
       }
       
       .header p {
           font-size: 1.1rem;
           opacity: 0.9;
           position: relative;
           z-index: 1;
       }
       
       .content {
           padding: 40px 30px;
       }
       
       .calculator-tabs {
           display: flex;
           background: #f8f9fa;
           border-radius: 15px;
           padding: 5px;
           margin-bottom: 30px;
           gap: 5px;
       }
       
       .tab-button {
           flex: 1;
           padding: 15px 20px;
           border: none;
           border-radius: 10px;
           background: transparent;
           cursor: pointer;
           transition: all 0.3s ease;
           font-weight: 600;
           font-size: 14px;
       }
       
       .tab-button.active {
           background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
           color: white;
       }
       
       .tab-content {
           display: none;
       }
       
       .tab-content.active {
           display: block;
       }
       
       .input-section {
           background: #f8f9fa;
           border-radius: 15px;
           padding: 30px;
           margin-bottom: 30px;
           border: 2px solid #e9ecef;
       }
       
       .input-grid {
           display: grid;
           grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
           gap: 25px;
       }
       
       .input-group {
           background: white;
           border-radius: 12px;
           padding: 20px;
           box-shadow: 0 2px 10px rgba(0,0,0,0.05);
       }
       
       .input-label {
           font-size: 1.1rem;
           font-weight: 600;
           color: #333;
           margin-bottom: 10px;
           display: flex;
           align-items: center;
           gap: 8px;
       }
       
       input[type="text"], input[type="number"], select {
           width: 100%;
           padding: 15px;
           border: 2px solid #e1e5e9;
           border-radius: 8px;
           font-size: 16px;
           transition: all 0.3s ease;
           background: #fafbfc;
       }
       
       input:focus, select:focus {
           outline: none;
           border-color: #667eea;
           background: white;
           box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
       }
       
       .parsed-result {
           margin-top: 10px;
           padding: 10px;
           background: #e3f2fd;
           border-radius: 6px;
           font-size: 14px;
           color: #1976d2;
       }
       
       .controls {
           display: flex;
           gap: 15px;
           flex-wrap: wrap;
           justify-content: center;
           margin: 25px 0;
       }
       
       .btn {
           background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
           color: white;
           border: none;
           padding: 15px 30px;
           border-radius: 25px;
           font-size: 16px;
           font-weight: 600;
           cursor: pointer;
           transition: all 0.3s ease;
       }
       
       .btn:hover {
           transform: translateY(-2px);
           box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
       }
       
       .btn-secondary {
           background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
       }
       
       .btn-danger {
           background: linear-gradient(135deg, #fd79a8 0%, #e84393 100%);
       }
       
       .result-section {
           border-radius: 15px;
           padding: 30px;
           margin-top: 30px;
           border: 2px solid;
           display: none;
           animation: fadeIn 0.5s ease-in;
       }
       
       .result-section.profit {
           background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%);
           border-color: #4caf50;
       }
       
       .result-section.loss {
           background: linear-gradient(135deg, #ffebee 0%, #ffcdd2 100%);
           border-color: #f44336;
       }
       
       @keyframes fadeIn {
           from { opacity: 0; transform: translateY(20px); }
           to { opacity: 1; transform: translateY(0); }
       }
       
       .result-title {
           font-size: 1.5rem;
           font-weight: bold;
           margin-bottom: 25px;
           text-align: center;
       }
       
       .result-title.profit {
           color: #2e7d32;
       }
       
       .result-title.loss {
           color: #c62828;
       }
       
       .stock-display {
           background: white;
           border-radius: 15px;
           padding: 30px;
           text-align: center;
           margin-bottom: 25px;
           box-shadow: 0 5px 20px rgba(0,0,0,0.1);
       }
       
       .stock-value {
           font-size: 3rem;
           font-weight: bold;
           margin-bottom: 10px;
           font-family: 'Courier New', monospace;
       }
       
       .stock-value.profit {
           color: #4caf50;
       }
       
       .stock-value.loss {
           color: #f44336;
       }
       
       .stock-description {
           font-size: 1.2rem;
           color: #666;
       }
       
       .result-grid {
           display: grid;
           grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
           gap: 20px;
       }
       
       .result-item {
           background: white;
           padding: 20px;
           border-radius: 12px;
           text-align: center;
           box-shadow: 0 3px 15px rgba(0,0,0,0.1);
       }
       
       .result-label {
           font-size: 0.9rem;
           color: #666;
           margin-bottom: 8px;
       }
       
       .result-value {
           font-size: 1.3rem;
           font-weight: bold;
       }
       
       .result-value.profit {
           color: #4caf50;
       }
       
       .result-value.loss {
           color: #f44336;
       }
       
       .result-value.neutral {
           color: #666;
       }
       
       .trading-summary {
           background: white;
           border-radius: 12px;
           padding: 20px;
           margin-top: 20px;
           box-shadow: 0 3px 15px rgba(0,0,0,0.1);
       }
       
       .summary-title {
           font-size: 1.1rem;
           font-weight: bold;
           color: #333;
           margin-bottom: 15px;
           text-align: center;
       }
       
       .summary-table {
           width: 100%;
           border-collapse: collapse;
           font-size: 14px;
       }
       
       .summary-table th, .summary-table td {
           padding: 8px 12px;
           text-align: center;
           border-bottom: 1px solid #e9ecef;
       }
       
       .summary-table th {
           background: #f8f9fa;
           font-weight: bold;
           color: #333;
       }
       
       .preset-amounts {
           background: white;
           border-radius: 12px;
           padding: 20px;
           margin-top: 20px;
           box-shadow: 0 3px 15px rgba(0,0,0,0.1);
       }
       
       .preset-title {
           font-size: 1.1rem;
           font-weight: bold;
           color: #333;
           margin-bottom: 15px;
           text-align: center;
       }
       
       .preset-grid {
           display: grid;
           grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
           gap: 10px;
       }
       
       .preset-btn {
           padding: 12px 15px;
           border: 2px solid #e9ecef;
           border-radius: 20px;
           background: white;
           cursor: pointer;
           transition: all 0.3s ease;
           text-align: center;
           font-weight: 600;
           font-size: 13px;
       }
       
       .preset-btn:hover {
           border-color: #667eea;
           background: rgba(102, 126, 234, 0.1);
       }
       
       @media (max-width: 768px) {
           .container {
               margin: 10px;
           }
           
           .header h1 {
               font-size: 2rem;
           }
           
           .calculator-tabs {
               flex-direction: column;
           }
           
           .input-grid {
               grid-template-columns: 1fr;
           }
           
           .controls {
               flex-direction: column;
           }
           
           .btn {
               width: 100%;
           }
           
           .stock-value {
               font-size: 2.5rem;
           }
       }
   </style>
</head>
<body>
   <div class="container">
       <div class="header">
           <h1>ğŸ“ˆ ì£¼ì‹ ê³„ì‚°ê¸°</h1>
           <p>ì£¼ì‹ ìˆ˜ìµë¥ , ì†ìµ, ë°°ë‹¹ì„ ì‰½ê²Œ ê³„ì‚°í•˜ê³  íˆ¬ì ì„±ê³¼ë¥¼ ë¶„ì„í•˜ì„¸ìš”</p>
       </div>
       
       <div class="content">
           <div class="calculator-tabs">
               <button class="tab-button active" onclick="switchTab('profit')">ìˆ˜ìµë¥  ê³„ì‚°</button>
               <button class="tab-button" onclick="switchTab('dividend')">ë°°ë‹¹ ê³„ì‚°</button>
               <button class="tab-button" onclick="switchTab('portfolio')">í¬íŠ¸í´ë¦¬ì˜¤</button>
           </div>
           
           <!-- ìˆ˜ìµë¥  ê³„ì‚° -->
           <div id="profit" class="tab-content active">
               <div class="input-section">
                   <div class="input-grid">
                       <div class="input-group">
                           <div class="input-label">
                               <span>ğŸ’°</span>
                               ë§¤ìˆ˜ê°€
                           </div>
                           <input type="number" id="buy-price" placeholder="ì˜ˆ: 50000" step="100" oninput="smartParseProfit()">
                           <div class="parsed-result" id="buyPriceParsed">ë§¤ìˆ˜ê°€ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”</div>
                       </div>
                       
                       <div class="input-group">
                           <div class="input-label">
                               <span>ğŸ’¸</span>
                               ë§¤ë„ê°€ (í˜„ì¬ê°€)
                           </div>
                           <input type="number" id="sell-price" placeholder="ì˜ˆ: 55000" step="100" oninput="smartParseProfit()">
                           <div class="parsed-result" id="sellPriceParsed">ë§¤ë„ê°€ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”</div>
                       </div>
                       
                       <div class="input-group">
                           <div class="input-label">
                               <span>ğŸ“Š</span>
                               ë³´ìœ  ìˆ˜ëŸ‰
                           </div>
                           <input type="number" id="quantity" placeholder="ì˜ˆ: 100" min="1" oninput="smartParseProfit()">
                           <div class="parsed-result" id="quantityParsed">ë³´ìœ  ìˆ˜ëŸ‰ì„ ì…ë ¥í•´ì£¼ì„¸ìš”</div>
                       </div>
                       
                       <div class="input-group">
                           <div class="input-label">
                               <span>ğŸ’³</span>
                               ìˆ˜ìˆ˜ë£Œìœ¨ (%)
                           </div>
                           <select id="commission-rate" onchange="smartParseProfit()">
                               <option value="0.015">ì¼ë°˜ ì¦ê¶Œì‚¬ (0.015%)</option>
                               <option value="0.025">ì€í–‰ ì¦ê¶Œ (0.025%)</option>
                               <option value="0.05">ê³ ìˆ˜ìˆ˜ë£Œ (0.05%)</option>
                               <option value="0">ìˆ˜ìˆ˜ë£Œ ì—†ìŒ (0%)</option>
                               <option value="custom">ì§ì ‘ ì…ë ¥</option>
                           </select>
                           <div class="parsed-result" id="commissionRateParsed">ì¼ë°˜ ì¦ê¶Œì‚¬ ìˆ˜ìˆ˜ë£Œê°€ ì„ íƒë˜ì—ˆìŠµë‹ˆë‹¤</div>
                       </div>
                   </div>
                   
                   <div class="input-group" id="custom-commission-group" style="display: none; margin-top: 20px;">
                       <div class="input-label">
                           <span>ğŸ“Š</span>
                           ì»¤ìŠ¤í…€ ìˆ˜ìˆ˜ë£Œìœ¨ (%)
                       </div>
                       <input type="number" id="custom-commission" placeholder="ì˜ˆ: 0.02" step="0.001" oninput="smartParseProfit()">
                       <div class="parsed-result" id="customCommissionParsed">ì»¤ìŠ¤í…€ ìˆ˜ìˆ˜ë£Œìœ¨ì„ ì…ë ¥í•´ì£¼ì„¸ìš”</div>
                   </div>
                   
                   <div class="preset-amounts">
                       <div class="preset-title">ğŸ¯ ë¹ ë¥¸ ê°€ê²© ì„¤ì •</div>
                       <div class="preset-grid">
                           <button class="preset-btn" onclick="setBuyPrice(10000)">1ë§Œì›</button>
                           <button class="preset-btn" onclick="setBuyPrice(50000)">5ë§Œì›</button>
                           <button class="preset-btn" onclick="setBuyPrice(100000)">10ë§Œì›</button>
                           <button class="preset-btn" onclick="setBuyPrice(200000)">20ë§Œì›</button>
                           <button class="preset-btn" onclick="setBuyPrice(500000)">50ë§Œì›</button>
                           <button class="preset-btn" onclick="setBuyPrice(1000000)">100ë§Œì›</button>
                       </div>
                   </div>
               </div>
               
               <div class="controls">
                   <button class="btn" onclick="calculateProfit()">ğŸ“ˆ ìˆ˜ìµë¥  ê³„ì‚°</button>
                   <button class="btn btn-secondary" onclick="showProfitExample()">ğŸ“ ì˜ˆì‹œ</button>
                   <button class="btn btn-danger" onclick="clearProfit()">ğŸ—‘ï¸ ì´ˆê¸°í™”</button>
               </div>
               
               <div class="result-section" id="profitResult"></div>
           </div>
           
           <!-- ë°°ë‹¹ ê³„ì‚° -->
           <div id="dividend" class="tab-content">
               <div class="input-section">
                   <div class="input-grid">
                       <div class="input-group">
                           <div class="input-label">
                               <span>ğŸ’°</span>
                               ì£¼ì‹ ê°€ê²©
                           </div>
                           <input type="number" id="stock-price" placeholder="ì˜ˆ: 80000" step="100" oninput="smartParseDividend()">
                           <div class="parsed-result" id="stockPriceParsed">ì£¼ì‹ ê°€ê²©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”</div>
                       </div>
                       
                       <div class="input-group">
                           <div class="input-label">
                               <span>ğŸ“Š</span>
                               ë³´ìœ  ìˆ˜ëŸ‰
                           </div>
                           <input type="number" id="dividend-quantity" placeholder="ì˜ˆ: 200" min="1" oninput="smartParseDividend()">
                           <div class="parsed-result" id="dividendQuantityParsed">ë³´ìœ  ìˆ˜ëŸ‰ì„ ì…ë ¥í•´ì£¼ì„¸ìš”</div>
                       </div>
                       
                       <div class="input-group">
                           <div class="input-label">
                               <span>ğŸ’¸</span>
                               ì—°ê°„ ë°°ë‹¹ê¸ˆ (ì£¼ë‹¹)
                           </div>
                           <input type="number" id="dividend-per-share" placeholder="ì˜ˆ: 2000" step="10" oninput="smartParseDividend()">
                           <div class="parsed-result" id="dividendPerShareParsed">ì£¼ë‹¹ ë°°ë‹¹ê¸ˆì„ ì…ë ¥í•´ì£¼ì„¸ìš”</div>
                       </div>
                       
                       <div class="input-group">
                           <div class="input-label">
                               <span>ğŸ“…</span>
                               ë°°ë‹¹ íšŸìˆ˜ (ì—°ê°„)
                           </div>
                           <select id="dividend-frequency" onchange="smartParseDividend()">
                               <option value="1">ì—° 1íšŒ</option>
                               <option value="2">ë°˜ê¸°ë³„ (ì—° 2íšŒ)</option>
                               <option value="4">ë¶„ê¸°ë³„ (ì—° 4íšŒ)</option>
                               <option value="12">ì›”ë³„ (ì—° 12íšŒ)</option>
                           </select>
                           <div class="parsed-result" id="dividendFrequencyParsed">ì—° 1íšŒ ë°°ë‹¹ì´ ì„ íƒë˜ì—ˆìŠµë‹ˆë‹¤</div>
                       </div>
                   </div>
               </div>
               
               <div class="controls">
                   <button class="btn" onclick="calculateDividend()">ğŸ’¸ ë°°ë‹¹ ê³„ì‚°</button>
                   <button class="btn btn-secondary" onclick="showDividendExample()">ğŸ“ ì˜ˆì‹œ</button>
                   <button class="btn btn-danger" onclick="clearDividend()">ğŸ—‘ï¸ ì´ˆê¸°í™”</button>
               </div>
               
               <div class="result-section" id="dividendResult"></div>
           </div>
           
           <!-- í¬íŠ¸í´ë¦¬ì˜¤ -->
           <div id="portfolio" class="tab-content">
               <div class="input-section">
                   <div class="input-grid">
                       <div class="input-group">
                           <div class="input-label">
                               <span>ğŸ’°</span>
                               ì´ íˆ¬ì ê¸ˆì•¡
                           </div>
                           <input type="text" id="total-investment" placeholder="ì˜ˆ: 1000ë§Œì›, 10000000ì›..." oninput="smartParsePortfolio()">
                           <div class="parsed-result" id="totalInvestmentParsed">ì´ íˆ¬ì ê¸ˆì•¡ì„ ì…ë ¥í•´ì£¼ì„¸ìš”</div>
                       </div>
                       
                       <div class="input-group">
                           <div class="input-label">
                               <span>ğŸ“ˆ</span>
                               í˜„ì¬ í‰ê°€ ê¸ˆì•¡
                           </div>
                           <input type="text" id="current-value" placeholder="ì˜ˆ: 1200ë§Œì›, 12000000ì›..." oninput="smartParsePortfolio()">
                           <div class="parsed-result" id="currentValueParsed">í˜„ì¬ í‰ê°€ ê¸ˆì•¡ì„ ì…ë ¥í•´ì£¼ì„¸ìš”</div>
                       </div>
                       
                       <div class="input-group">
                           <div class="input-label">
                               <span>ğŸ“…</span>
                               íˆ¬ì ê¸°ê°„ (ê°œì›”)
                           </div>
                           <input type="number" id="investment-period" placeholder="ì˜ˆ: 12" min="1" oninput="smartParsePortfolio()">
                           <div class="parsed-result" id="investmentPeriodParsed">íˆ¬ì ê¸°ê°„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”</div>
                       </div>
                       
                       <div class="input-group">
                           <div class="input-label">
                               <span>ğŸ’¸</span>
                               ë°›ì€ ë°°ë‹¹ê¸ˆ (ì´ì•¡)
                           </div>
                           <input type="text" id="total-dividend" placeholder="ì˜ˆ: 50ë§Œì›, 500000ì›..." oninput="smartParsePortfolio()">
                           <div class="parsed-result" id="totalDividendParsed">ì„ íƒì‚¬í•­ (ì—†ìœ¼ë©´ 0ì›)</div>
                       </div>
                   </div>
               </div>
               
               <div class="controls">
                   <button class="btn" onclick="calculatePortfolio()">ğŸ“Š í¬íŠ¸í´ë¦¬ì˜¤ ë¶„ì„</button>
                   <button class="btn btn-secondary" onclick="showPortfolioExample()">ğŸ“ ì˜ˆì‹œ</button>
                   <button class="btn btn-danger" onclick="clearPortfolio()">ğŸ—‘ï¸ ì´ˆê¸°í™”</button>
               </div>
               
               <div class="result-section" id="portfolioResult"></div>
           </div>
       </div>
   </div>

   <script>
       let currentTab = 'profit';
       
       class PriceParser {
           constructor() {
               this.koreanUnits = {
                   'ì²œ': 1000,
                   'ë§Œ': 10000,
                   'ì–µ': 100000000
               };
           }
           
           parseAmount(input) {
               if (!input) return null;
               
               let cleaned = input.replace(/\s+/g, '');
               
               for (let [unit, multiplier] of Object.entries(this.koreanUnits)) {
                   if (cleaned.includes(unit)) {
                       let parts = cleaned.split(unit);
                       if (parts[0]) {
                           let num = parseFloat(parts[0].replace(/[^0-9.]/g, ''));
                           if (!isNaN(num)) {
                               return num * multiplier;
                           }
                       }
                   }
               }
               
               cleaned = cleaned.replace(/[^0-9.]/g, '');
               let num = parseFloat(cleaned);
               
               return isNaN(num) ? null : num;
           }
       }
       
       const parser = new PriceParser();
       
       function switchTab(tabName) {
           document.querySelectorAll('.tab-button').forEach(btn => {
               btn.classList.remove('active');
           });
           event.target.classList.add('active');
           
           document.querySelectorAll('.tab-content').forEach(content => {
               content.classList.remove('active');
           });
           document.getElementById(tabName).classList.add('active');
           
           currentTab = tabName;
       }
       
       // ìˆ˜ìµë¥  ê³„ì‚°
       function smartParseProfit() {
           const buyPrice = document.getElementById('buy-price').value;
           const sellPrice = document.getElementById('sell-price').value;
           const quantity = document.getElementById('quantity').value;
           const commissionRate = document.getElementById('commission-rate').value;
           
           if (buyPrice) {
               document.getElementById('buyPriceParsed').textContent = `ë§¤ìˆ˜ê°€: ${parseFloat(buyPrice).toLocaleString()}ì›`;
           } else {
               document.getElementById('buyPriceParsed').textContent = 'ë§¤ìˆ˜ê°€ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”';
           }
           
           if (sellPrice) {
               document.getElementById('sellPriceParsed').textContent = `ë§¤ë„ê°€: ${parseFloat(sellPrice).toLocaleString()}ì›`;
           } else {
               document.getElementById('sellPriceParsed').textContent = 'ë§¤ë„ê°€ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”';
           }
           
           if (quantity) {
               document.getElementById('quantityParsed').textContent = `ë³´ìœ  ìˆ˜ëŸ‰: ${parseInt(quantity).toLocaleString()}ì£¼`;
           } else {
               document.getElementById('quantityParsed').textContent = 'ë³´ìœ  ìˆ˜ëŸ‰ì„ ì…ë ¥í•´ì£¼ì„¸ìš”';
           }
           
           const commissionTypes = {
               '0.015': 'ì¼ë°˜ ì¦ê¶Œì‚¬ ìˆ˜ìˆ˜ë£Œê°€ ì„ íƒë˜ì—ˆìŠµë‹ˆë‹¤',
               '0.025': 'ì€í–‰ ì¦ê¶Œ ìˆ˜ìˆ˜ë£Œê°€ ì„ íƒë˜ì—ˆìŠµë‹ˆë‹¤',
               '0.05': 'ê³ ìˆ˜ìˆ˜ë£Œê°€ ì„ íƒë˜ì—ˆìŠµë‹ˆë‹¤',
               '0': 'ìˆ˜ìˆ˜ë£Œ ì—†ìŒì´ ì„ íƒë˜ì—ˆìŠµë‹ˆë‹¤',
               'custom': 'ì»¤ìŠ¤í…€ ìˆ˜ìˆ˜ë£Œê°€ ì„ íƒë˜ì—ˆìŠµë‹ˆë‹¤'
           };
           
           document.getElementById('commissionRateParsed').textContent = commissionTypes[commissionRate];
           
           const customGroup = document.getElementById('custom-commission-group');
           if (commissionRate === 'custom') {
               customGroup.style.display = 'block';
               const customRate = document.getElementById('custom-commission').value;
               if (customRate) {
                   document.getElementById('customCommissionParsed').textContent = `ì»¤ìŠ¤í…€ ìˆ˜ìˆ˜ë£Œ: ${customRate}%`;
               }
           } else {
               customGroup.style.display = 'none';
           }
       }
       
       function setBuyPrice(price) {
           document.getElementById('buy-price').value = price;
           smartParseProfit();
       }
       
       function calculateProfit() {
           const buyPrice = parseFloat(document.getElementById('buy-price').value);
           const sellPrice = parseFloat(document.getElementById('sell-price').value);
           const quantity = parseInt(document.getElementById('quantity').value);
           let commissionRate = document.getElementById('commission-rate').value;
           
           if (!buyPrice || !sellPrice || !quantity) {
               alert('ë§¤ìˆ˜ê°€, ë§¤ë„ê°€, ìˆ˜ëŸ‰ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.');
               return;
           }
           
           if (commissionRate === 'custom') {
               const customRate = parseFloat(document.getElementById('custom-commission').value);
               if (!customRate && customRate !== 0) {
                   alert('ì»¤ìŠ¤í…€ ìˆ˜ìˆ˜ë£Œìœ¨ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                   return;
               }
               commissionRate = customRate;
           } else {
               commissionRate = parseFloat(commissionRate);
           }
           
           // ë§¤ìˆ˜/ë§¤ë„ ê¸ˆì•¡ ê³„ì‚°
           const buyAmount = buyPrice * quantity;
           const sellAmount = sellPrice * quantity;
           
           // ìˆ˜ìˆ˜ë£Œ ê³„ì‚°
           const buyCommission = buyAmount * (commissionRate / 100);
           const sellCommission = sellAmount * (commissionRate / 100);
           const totalCommission = buyCommission + sellCommission;
           
           // ì†ìµ ê³„ì‚°
           const grossProfit = sellAmount - buyAmount;
           const netProfit = grossProfit - totalCommission;
           const profitRate = (netProfit / buyAmount) * 100;
           
           // ê²°ê³¼ í´ë˜ìŠ¤ ê²°ì •
           const resultClass = netProfit >= 0 ? 'profit' : 'loss';
           const resultText = netProfit >= 0 ? 'ìˆ˜ìµ' : 'ì†ì‹¤';
           
           const resultHTML = `
               <div class="result-title ${resultClass}">ğŸ“ˆ ì£¼ì‹ ${resultText} ê³„ì‚° ê²°ê³¼</div>
               <div class="stock-display">
                   <div class="stock-value ${resultClass}">${netProfit >= 0 ? '+' : ''}${Math.round(netProfit).toLocaleString()}ì›</div>
                   <div class="stock-description">ì‹¤í˜„ ${resultText}</div>
               </div>
               <div class="result-grid">
                   <div class="result-item">
                       <div class="result-label">ë§¤ìˆ˜ê°€</div>
                       <div class="result-value neutral">${buyPrice.toLocaleString()}ì›</div>
                   </div>
                   <div class="result-item">
                       <div class="result-label">ë§¤ë„ê°€</div>
                       <div class="result-value neutral">${sellPrice.toLocaleString()}ì›</div>
                   </div>
                   <div class="result-item">
                       <div class="result-label">ë³´ìœ  ìˆ˜ëŸ‰</div>
                       <div class="result-value neutral">${quantity.toLocaleString()}ì£¼</div>
                   </div>
                   <div class="result-item">
                       <div class="result-label">ë§¤ìˆ˜ ê¸ˆì•¡</div>
                       <div class="result-value neutral">${buyAmount.toLocaleString()}ì›</div>
                   </div>
                   <div class="result-item">
                       <div class="result-label">ë§¤ë„ ê¸ˆì•¡</div>
                       <div class="result-value neutral">${sellAmount.toLocaleString()}ì›</div>
                   </div>
                   <div class="result-item">
                       <div class="result-label">ì´ ìˆ˜ìˆ˜ë£Œ</div>
                       <div class="result-value neutral">${Math.round(totalCommission).toLocaleString()}ì›</div>
                   </div>
                   <div class="result-item">
                       <div class="result-label">ì‹¤í˜„ ${resultText}</div>
                       <div class="result-value ${resultClass}">${netProfit >= 0 ? '+' : ''}${Math.round(netProfit).toLocaleString()}ì›</div>
                   </div>
                   <div class="result-item">
                       <div class="result-label">${resultText}ë¥ </div>
                       <div class="result-value ${resultClass}">${netProfit >= 0 ? '+' : ''}${profitRate.toFixed(2)}%</div>
                   </div>
               </div>
               <div class="trading-summary">
                   <div class="summary-title">ğŸ“Š ê±°ë˜ ìš”ì•½</div>
                   <table class="summary-table">
                       <tr>
                           <th>êµ¬ë¶„</th>
                           <th>ê¸ˆì•¡</th>
                           <th>ìˆ˜ìˆ˜ë£Œ</th>
                           <th>ì‹¤ì œ ê¸ˆì•¡</th>
                       </tr>
                       <tr>
                           <td>ë§¤ìˆ˜</td>
                           <td>${buyAmount.toLocaleString()}ì›</td>
                           <td>${Math.round(buyCommission).toLocaleString()}ì›</td>
                           <td>${Math.round(buyAmount + buyCommission).toLocaleString()}ì›</td>
                       </tr>
                       <tr>
                           <td>ë§¤ë„</td>
                           <td>${sellAmount.toLocaleString()}ì›</td>
                           <td>${Math.round(sellCommission).toLocaleString()}ì›</td>
                           <td>${Math.round(sellAmount - sellCommission).toLocaleString()}ì›</td>
                       </tr>
                   </table>
               </div>
           `;
           
           const resultSection = document.getElementById('profitResult');
           resultSection.innerHTML = resultHTML;
           resultSection.className = `result-section ${resultClass}`;
           resultSection.style.display = 'block';
           resultSection.scrollIntoView({ behavior: 'smooth' });
       }
       
       function showProfitExample() {
           document.getElementById('buy-price').value = '50000';
           document.getElementById('sell-price').value = '55000';
           document.getElementById('quantity').value = '100';
           document.getElementById('commission-rate').value = '0.015';
           smartParseProfit();
       }
       
       function clearProfit() {
           document.getElementById('buy-price').value = '';
           document.getElementById('sell-price').value = '';
           document.getElementById('quantity').value = '';
           document.getElementById('commission-rate').value = '0.015';
           document.getElementById('custom-commission').value = '';
           smartParseProfit();
           document.getElementById('profitResult').style.display = 'none';
       }
       
       // ë°°ë‹¹ ê³„ì‚°
       function smartParseDividend() {
           const stockPrice = document.getElementById('stock-price').value;
           const quantity = document.getElementById('dividend-quantity').value;
           const dividendPerShare = document.getElementById('dividend-per-share').value;
           const frequency = document.getElementById('dividend-frequency').value;
           
           if (stockPrice) {
               document.getElementById('stockPriceParsed').textContent = `ì£¼ì‹ ê°€ê²©: ${parseFloat(stockPrice).toLocaleString()}ì›`;
           } else {
               document.getElementById('stockPriceParsed').textContent = 'ì£¼ì‹ ê°€ê²©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”';
           }
           
           if (quantity) {
               document.getElementById('dividendQuantityParsed').textContent = `ë³´ìœ  ìˆ˜ëŸ‰: ${parseInt(quantity).toLocaleString()}ì£¼`;
           } else {
               document.getElementById('dividendQuantityParsed').textContent = 'ë³´ìœ  ìˆ˜ëŸ‰ì„ ì…ë ¥í•´ì£¼ì„¸ìš”';
           }
           
           if (dividendPerShare) {
               document.getElementById('dividendPerShareParsed').textContent = `ì£¼ë‹¹ ë°°ë‹¹ê¸ˆ: ${parseFloat(dividendPerShare).toLocaleString()}ì›`;
           } else {
               document.getElementById('dividendPerShareParsed').textContent = 'ì£¼ë‹¹ ë°°ë‹¹ê¸ˆì„ ì…ë ¥í•´ì£¼ì„¸ìš”';
           }
           
           const frequencyNames = {
               '1': 'ì—° 1íšŒ ë°°ë‹¹ì´ ì„ íƒë˜ì—ˆìŠµë‹ˆë‹¤',
               '2': 'ë°˜ê¸°ë³„ ë°°ë‹¹ì´ ì„ íƒë˜ì—ˆìŠµë‹ˆë‹¤',
               '4': 'ë¶„ê¸°ë³„ ë°°ë‹¹ì´ ì„ íƒë˜ì—ˆìŠµë‹ˆë‹¤',
               '12': 'ì›”ë³„ ë°°ë‹¹ì´ ì„ íƒë˜ì—ˆìŠµë‹ˆë‹¤'
           };
           
           document.getElementById('dividendFrequencyParsed').textContent = frequencyNames[frequency];
       }
       
       function calculateDividend() {
           const stockPrice = parseFloat(document.getElementById('stock-price').value);
           const quantity = parseInt(document.getElementById('dividend-quantity').value);
           const dividendPerShare = parseFloat(document.getElementById('dividend-per-share').value);
           const frequency = parseInt(document.getElementById('dividend-frequency').value);
           
           if (!stockPrice || !quantity || !dividendPerShare) {
               alert('ì£¼ì‹ ê°€ê²©, ë³´ìœ  ìˆ˜ëŸ‰, ì£¼ë‹¹ ë°°ë‹¹ê¸ˆì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.');
               return;
           }
           
           // íˆ¬ì ê¸ˆì•¡
           const totalInvestment = stockPrice * quantity;
           
           // ë°°ë‹¹ ê³„ì‚°
           const annualDividend = dividendPerShare * quantity;
           const dividendPerPayment = annualDividend / frequency;
           const dividendYield = (dividendPerShare / stockPrice) * 100;
           
           // ì„¸í›„ ë°°ë‹¹ (ë°°ë‹¹ì†Œë“ì„¸ 15.4% ì ìš©)
           const dividendTaxRate = 0.154;
           const afterTaxAnnualDividend = annualDividend * (1 - dividendTaxRate);
           const afterTaxDividendPerPayment = dividendPerPayment * (1 - dividendTaxRate);
           const afterTaxYield = dividendYield * (1 - dividendTaxRate);
           
           const resultHTML = `
               <div class="result-title profit">ğŸ’¸ ë°°ë‹¹ ê³„ì‚° ê²°ê³¼</div>
               <div class="stock-display">
                   <div class="stock-value profit">${Math.round(annualDividend).toLocaleString()}ì›</div>
                   <div class="stock-description">ì—°ê°„ ë°°ë‹¹ê¸ˆ (ì„¸ì „)</div>
               </div>
               <div class="result-grid">
                   <div class="result-item">
                       <div class="result-label">ì£¼ì‹ ê°€ê²©</div>
                       <div class="result-value neutral">${stockPrice.toLocaleString()}ì›</div>
                   </div>
                   <div class="result-item">
                       <div class="result-label">ë³´ìœ  ìˆ˜ëŸ‰</div>
                       <div class="result-value neutral">${quantity.toLocaleString()}ì£¼</div>
                   </div>
                   <div class="result-item">
                       <div class="result-label">íˆ¬ì ê¸ˆì•¡</div>
                       <div class="result-value neutral">${totalInvestment.toLocaleString()}ì›</div>
                   </div>
                   <div class="result-item">
                       <div class="result-label">ì£¼ë‹¹ ë°°ë‹¹ê¸ˆ</div>
                       <div class="result-value neutral">${dividendPerShare.toLocaleString()}ì›</div>
                   </div>
                   <div class="result-item">
                       <div class="result-label">ë°°ë‹¹ ìˆ˜ìµë¥ </div>
                       <div class="result-value profit">${dividendYield.toFixed(2)}%</div>
                   </div>
                   <div class="result-item">
                       <div class="result-label">ì—°ê°„ ë°°ë‹¹ê¸ˆ</div>
                       <div class="result-value profit">${Math.round(annualDividend).toLocaleString()}ì›</div>
                   </div>
                   <div class="result-item">
                       <div class="result-label">íšŒë‹¹ ë°°ë‹¹ê¸ˆ</div>
                       <div class="result-value profit">${Math.round(dividendPerPayment).toLocaleString()}ì›</div>
                   </div>
                   <div class="result-item">
                       <div class="result-label">ì„¸í›„ ì—°ê°„ ë°°ë‹¹</div>
                       <div class="result-value profit">${Math.round(afterTaxAnnualDividend).toLocaleString()}ì›</div>
                   </div>
                   <div class="result-item">
                       <div class="result-label">ì„¸í›„ ìˆ˜ìµë¥ </div>
                       <div class="result-value profit">${afterTaxYield.toFixed(2)}%</div>
                   </div>
               </div>
               <div class="trading-summary">
                   <div class="summary-title">ğŸ“Š ë°°ë‹¹ ìŠ¤ì¼€ì¤„</div>
                   <table class="summary-table">
                       <tr>
                           <th>êµ¬ë¶„</th>
                           <th>ë°°ë‹¹ê¸ˆ (ì„¸ì „)</th>
                           <th>ë°°ë‹¹ì†Œë“ì„¸</th>
                           <th>ì‹¤ìˆ˜ë ¹ì•¡</th>
                       </tr>
                       <tr>
                           <td>íšŒë‹¹ ë°°ë‹¹</td>
                           <td>${Math.round(dividendPerPayment).toLocaleString()}ì›</td>
                           <td>${Math.round(dividendPerPayment * dividendTaxRate).toLocaleString()}ì›</td>
                           <td>${Math.round(afterTaxDividendPerPayment).toLocaleString()}ì›</td>
                       </tr>
                       <tr>
                           <td>ì—°ê°„ ë°°ë‹¹</td>
                           <td>${Math.round(annualDividend).toLocaleString()}ì›</td>
                           <td>${Math.round(annualDividend * dividendTaxRate).toLocaleString()}ì›</td>
                           <td>${Math.round(afterTaxAnnualDividend).toLocaleString()}ì›</td>
                       </tr>
                   </table>
               </div>
           `;
           
           const resultSection = document.getElementById('dividendResult');
           resultSection.innerHTML = resultHTML;
           resultSection.className = 'result-section profit';
           resultSection.style.display = 'block';
           resultSection.scrollIntoView({ behavior: 'smooth' });
       }
       
       function showDividendExample() {
           document.getElementById('stock-price').value = '80000';
           document.getElementById('dividend-quantity').value = '200';
           document.getElementById('dividend-per-share').value = '2000';
           document.getElementById('dividend-frequency').value = '4';
           smartParseDividend();
       }
       
       function clearDividend() {
           document.getElementById('stock-price').value = '';
           document.getElementById('dividend-quantity').value = '';
           document.getElementById('dividend-per-share').value = '';
           document.getElementById('dividend-frequency').value = '1';
           smartParseDividend();
           document.getElementById('dividendResult').style.display = 'none';
       }
       
       // í¬íŠ¸í´ë¦¬ì˜¤ ê³„ì‚°
       function smartParsePortfolio() {
           const totalInvestment = document.getElementById('total-investment').value;
           const currentValue = document.getElementById('current-value').value;
           const period = document.getElementById('investment-period').value;
           const totalDividend = document.getElementById('total-dividend').value;
           
           const parsedInvestment = parser.parseAmount(totalInvestment);
           const parsedCurrentValue = parser.parseAmount(currentValue);
           const parsedDividend = parser.parseAmount(totalDividend) || 0;
           
           if (parsedInvestment) {
               document.getElementById('totalInvestmentParsed').textContent = `ì¸ì‹ë¨: ${parsedInvestment.toLocaleString()}ì›`;
           } else {
               document.getElementById('totalInvestmentParsed').textContent = 'ì´ íˆ¬ì ê¸ˆì•¡ì„ ì…ë ¥í•´ì£¼ì„¸ìš”';
           }
           
           if (parsedCurrentValue) {
               document.getElementById('currentValueParsed').textContent = `ì¸ì‹ë¨: ${parsedCurrentValue.toLocaleString()}ì›`;
           } else {
               document.getElementById('currentValueParsed').textContent = 'í˜„ì¬ í‰ê°€ ê¸ˆì•¡ì„ ì…ë ¥í•´ì£¼ì„¸ìš”';
           }
           
           if (period) {
               document.getElementById('investmentPeriodParsed').textContent = `íˆ¬ì ê¸°ê°„: ${period}ê°œì›”`;
           } else {
               document.getElementById('investmentPeriodParsed').textContent = 'íˆ¬ì ê¸°ê°„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”';
           }
           
           if (parsedDividend > 0) {
               document.getElementById('totalDividendParsed').textContent = `ì¸ì‹ë¨: ${parsedDividend.toLocaleString()}ì›`;
           } else {
               document.getElementById('totalDividendParsed').textContent = 'ì„ íƒì‚¬í•­ (ì—†ìœ¼ë©´ 0ì›)';
           }
       }
       
       function calculatePortfolio() {
           const totalInvestment = parser.parseAmount(document.getElementById('total-investment').value);
           const currentValue = parser.parseAmount(document.getElementById('current-value').value);
           const period = parseInt(document.getElementById('investment-period').value);
           const totalDividend = parser.parseAmount(document.getElementById('total-dividend').value) || 0;
           
           if (!totalInvestment || !currentValue || !period) {
               alert('ì´ íˆ¬ì ê¸ˆì•¡, í˜„ì¬ í‰ê°€ ê¸ˆì•¡, íˆ¬ì ê¸°ê°„ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.');
               return;
           }
           
           // ì†ìµ ê³„ì‚°
           const capitalGain = currentValue - totalInvestment;
           const totalReturn = capitalGain + totalDividend;
           const totalReturnRate = (totalReturn / totalInvestment) * 100;
           
           // ì—°í™˜ì‚° ìˆ˜ìµë¥  ê³„ì‚°
           const years = period / 12;
           const annualizedReturn = years > 0 ? (Math.pow(((currentValue + totalDividend) / totalInvestment), (1 / years)) - 1) * 100 : 0;
           
           // ì›”í‰ê·  ìˆ˜ìµë¥ 
           const monthlyReturn = totalReturnRate / period;
           
           // ê²°ê³¼ í´ë˜ìŠ¤ ê²°ì •
           const resultClass = totalReturn >= 0 ? 'profit' : 'loss';
           const resultText = totalReturn >= 0 ? 'ìˆ˜ìµ' : 'ì†ì‹¤';
           
           const resultHTML = `
               <div class="result-title ${resultClass}">ğŸ“Š í¬íŠ¸í´ë¦¬ì˜¤ ë¶„ì„ ê²°ê³¼</div>
               <div class="stock-display">
                   <div class="stock-value ${resultClass}">${totalReturn >= 0 ? '+' : ''}${Math.round(totalReturn).toLocaleString()}ì›</div>
                   <div class="stock-description">ì´ ${resultText}</div>
               </div>
               <div class="result-grid">
                   <div class="result-item">
                       <div class="result-label">ì´ íˆ¬ì ê¸ˆì•¡</div>
                       <div class="result-value neutral">${totalInvestment.toLocaleString()}ì›</div>
                   </div>
                   <div class="result-item">
                       <div class="result-label">í˜„ì¬ í‰ê°€ ê¸ˆì•¡</div>
                       <div class="result-value neutral">${currentValue.toLocaleString()}ì›</div>
                   </div>
                   <div class="result-item">
                       <div class="result-label">íˆ¬ì ê¸°ê°„</div>
                       <div class="result-value neutral">${period}ê°œì›”</div>
                   </div>
                   <div class="result-item">
                       <div class="result-label">í‰ê°€ ${resultText}</div>
                       <div class="result-value ${resultClass}">${capitalGain >= 0 ? '+' : ''}${Math.round(capitalGain).toLocaleString()}ì›</div>
                   </div>
                   <div class="result-item">
                       <div class="result-label">ë°°ë‹¹ ìˆ˜ìµ</div>
                       <div class="result-value profit">${Math.round(totalDividend).toLocaleString()}ì›</div>
                   </div>
                   <div class="result-item">
                       <div class="result-label">ì´ ${resultText}</div>
                       <div class="result-value ${resultClass}">${totalReturn >= 0 ? '+' : ''}${Math.round(totalReturn).toLocaleString()}ì›</div>
                   </div>
                   <div class="result-item">
                       <div class="result-label">ì´ ìˆ˜ìµë¥ </div>
                       <div class="result-value ${resultClass}">${totalReturnRate >= 0 ? '+' : ''}${totalReturnRate.toFixed(2)}%</div>
                   </div>
                   <div class="result-item">
                       <div class="result-label">ì—°í™˜ì‚° ìˆ˜ìµë¥ </div>
                       <div class="result-value ${resultClass}">${annualizedReturn >= 0 ? '+' : ''}${annualizedReturn.toFixed(2)}%</div>
                   </div>
                   <div class="result-item">
                       <div class="result-label">ì›”í‰ê·  ìˆ˜ìµë¥ </div>
                       <div class="result-value ${resultClass}">${monthlyReturn >= 0 ? '+' : ''}${monthlyReturn.toFixed(2)}%</div>
                   </div>
               </div>
               <div class="trading-summary">
                   <div class="summary-title">ğŸ“ˆ ìˆ˜ìµ êµ¬ì¡° ë¶„ì„</div>
                   <table class="summary-table">
                       <tr>
                           <th>êµ¬ë¶„</th>
                           <th>ê¸ˆì•¡</th>
                           <th>ë¹„ìœ¨</th>
                           <th>ê¸°ì—¬ë„</th>
                       </tr>
                       <tr>
                           <td>í‰ê°€ ${capitalGain >= 0 ? 'ìˆ˜ìµ' : 'ì†ì‹¤'}</td>
                           <td>${Math.round(capitalGain).toLocaleString()}ì›</td>
                           <td>${((capitalGain / totalInvestment) * 100).toFixed(2)}%</td>
                           <td>${totalReturn !== 0 ? ((capitalGain / totalReturn) * 100).toFixed(1) : '0'}%</td>
                       </tr>
                       <tr>
                           <td>ë°°ë‹¹ ìˆ˜ìµ</td>
                           <td>${Math.round(totalDividend).toLocaleString()}ì›</td>
                           <td>${((totalDividend / totalInvestment) * 100).toFixed(2)}%</td>
                           <td>${totalReturn !== 0 ? ((totalDividend / totalReturn) * 100).toFixed(1) : '0'}%</td>
                       </tr>
                   </table>
               </div>
           `;
           
           const resultSection = document.getElementById('portfolioResult');
           resultSection.innerHTML = resultHTML;
           resultSection.className = `result-section ${resultClass}`;
           resultSection.style.display = 'block';
           resultSection.scrollIntoView({ behavior: 'smooth' });
       }
       
       function showPortfolioExample() {
           document.getElementById('total-investment').value = '1000ë§Œì›';
           document.getElementById('current-value').value = '1200ë§Œì›';
           document.getElementById('investment-period').value = '18';
           document.getElementById('total-dividend').value = '50ë§Œì›';
           smartParsePortfolio();
       }
       
       function clearPortfolio() {
           document.getElementById('total-investment').value = '';
           document.getElementById('current-value').value = '';
           document.getElementById('investment-period').value = '';
           document.getElementById('total-dividend').value = '';
           smartParsePortfolio();
           document.getElementById('portfolioResult').style.display = 'none';
       }
       
       window.addEventListener('load', function() {
           showProfitExample();
           setTimeout(() => calculateProfit(), 1500);
       });
   </script>
</body>
</html>
