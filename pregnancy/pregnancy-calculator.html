<!DOCTYPE html>
<html lang="ko">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-68VLJL7XXD"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-68VLJL7XXD');
    </script>
    
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2277280131930191"
         crossorigin="anonymous"></script>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>임신 주수 계산기 - 무료 온라인 임신주차 출산예정일 계산 | CalcHub</title>
    <meta name="description" content="무료 임신 주수 계산기로 현재 임신주차, 출산예정일, 마지막 생리일을 즉시 계산하세요. 임신 1주부터 40주까지 정확한 주수 계산과 태아 발달 상황 제공. 예비마마에게 필수적인 도구.">
    <meta name="keywords" content="온라인계산기, 무료계산기, 임신주수계산기, 임신주차계산기, 출산예정일계산기, 마지막생리일계산기, 임신계산기, 다출예정일계산기, 임신주계계산기, 태아계산기">
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/common.css">
    <script src="../js/sidebar.js"></script>
</head>
<body>
    <!-- 공통 헤더 -->
    <header class="header">
        <div class="header-content">
            <a href="../index.html" class="logo">
                <div class="logo-icon">🧮</div>
                CalcHub
            </a>
            <nav class="nav-links">
                <a href="../index.html#calculators" class="nav-link">계산기</a>
                <a href="../about.html" class="nav-link">소개</a>
                <a href="../contact.html" class="nav-link">문의</a>
            </nav>
        </div>
    </header>

    <div class="container">
        <div class="calculator-card">
            <!-- 계산기 헤더 -->
            <div class="calculator-header">
                <h1 class="calculator-title">임신 주수 계산기</h1>
                <p class="calculator-subtitle">현재 임신 주차와 출산예정일을 간편하게 계산하세요</p>
            </div>

            <!-- 계산기 본문 -->
            <div class="calculator-body">
                <!-- 입력 섹션 -->
                <div class="input-section">
                    <h2 class="section-title">임신 정보</h2>
                    <div class="input-grid">
                        <div class="input-group">
                            <label for="lastPeriodDate" class="input-label">마지막 생리 시작일</label>
                            <input type="text" id="lastPeriodDate" class="input-field" placeholder="예: 2024-01-01, 2024년 1월 1일">
                        </div>
                        <div class="input-group">
                            <label for="cycleLength" class="input-label">생리 주기 (일)</label>
                            <input type="text" id="cycleLength" class="input-field" placeholder="기본값: 28일" value="28">
                        </div>
                    </div>
                    <button onclick="calculate()" class="btn btn-primary">계산하기</button>
                </div>

                <!-- 결과 섹션 -->
                <div id="resultSection" class="result-section">
                    <h2 class="result-title">계산 결과</h2>
                    <div class="result-grid">
                        <div class="result-item">
                            <div class="result-label">임신 주수</div>
                            <div id="pregnancyWeeks" class="result-value highlight">-</div>
                        </div>
                        <div class="result-item">
                            <div class="result-label">출산예정일</div>
                            <div id="dueDate" class="result-value">-</div>
                        </div>
                        <div class="result-item">
                            <div class="result-label">출산까지 남은 일수</div>
                            <div id="daysRemaining" class="result-value">-</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 교육 콘텐츠 섹션 추가 -->
            <div class="content-section" style="margin-top: 40px; padding: 30px; background: #f8f9fa; border-radius: 12px;">
                
                <!-- 1. 메뉴얼 (사용법 가이드) -->
                <div class="manual-section" style="margin-bottom: 30px;">
                    <h2 style="color: #333; font-size: 24px; margin-bottom: 15px;">📖 임신주수계산기 사용 가이드</h2>
                    <p style="line-height: 1.8; color: #666;">
                        임신주수계산기는 마지막 생리 시작일을 기준으로 현재 임신 주차와 출산예정일을 정확히 계산해드립니다.
                        의료진과 동일한 계산 방식을 사용하여 산전 관리 계획 수립과 병원 방문 일정 관리에 도움을 드리며, 태아의 발달 단계도 함께 확인할 수 있습니다.
                    </p>
                    <ul style="line-height: 1.8; color: #666; margin-left: 20px;">
                        <li><strong>마지막 생리일 기준:</strong> 의학적으로 표준화된 계산 방식으로 정확한 임신 주차를 산출합니다.</li>
                        <li><strong>생리 주기 조정:</strong> 개인별 생리 주기(21-35일)를 고려하여 더욱 정밀한 계산이 가능합니다.</li>
                        <li><strong>출산예정일 산출:</strong> 마지막 생리일 + 280일 공식으로 의료진과 동일한 예정일을 제공합니다.</li>
                        <li><strong>임신 진행 상태:</strong> 현재 몇 주 몇 일인지, 출산까지 며칠 남았는지 상세한 정보를 제공합니다.</li>
                    </ul>
                </div>

                <!-- 2. 실제 예시 -->
                <div class="example-section" style="margin-bottom: 30px;">
                    <h2 style="color: #333; font-size: 24px; margin-bottom: 15px;">💡 실제 활용 예시</h2>
                    
                    <div style="background: white; padding: 20px; border-radius: 8px; margin-bottom: 15px;">
                        <h3 style="color: #007bff; font-size: 18px; margin-bottom: 10px;">👶 임신 초기 관리 (1-12주)</h3>
                        <p style="line-height: 1.8; color: #666;">
                            • 6-8주: 첫 병원 방문, 임신 확인 및 산모수첩 발급<br>
                            • 10-14주: <strong>기형아 검사(통합검사) 최적 시기</strong><br>
                            • 12주: 1분기 마무리, 유산 위험 크게 감소, 주변에 임신 소식 공개 시기
                        </p>
                    </div>

                    <div style="background: white; padding: 20px; border-radius: 8px; margin-bottom: 15px;">
                        <h3 style="color: #28a745; font-size: 18px; margin-bottom: 10px;">🏥 정기 검진 스케줄 (13-28주)</h3>
                        <p style="line-height: 1.8; color: #666;">
                            • 18-22주: <strong>정밀 초음파 검사</strong>, 성별 확인 가능<br>
                            • 24-28주: 임신성 당뇨 검사(당부하 검사) 시기<br>
                            • 매월 1회 정기 검진, 체중 증가량 및 혈압 체크 필수
                        </p>
                    </div>

                    <div style="background: white; padding: 20px; border-radius: 8px;">
                        <h3 style="color: #dc3545; font-size: 18px; margin-bottom: 10px;">🍼 출산 준비 (29-40주)</h3>
                        <p style="line-height: 1.8; color: #666;">
                            • 32주: 출산용품 준비 시작, 태교 및 출산 교실 참여<br>
                            • 36주 이후: 언제든 출산 가능, <strong>출산가방 준비 완료</strong><br>
                            • 37-42주: 정상 만삭 기간, 매주 병원 검진으로 출산 시기 모니터링
                        </p>
                    </div>
                </div>

                <!-- 3. 생활 꿀팁 -->
                <div class="tips-section" style="margin-bottom: 30px;">
                    <h2 style="color: #333; font-size: 24px; margin-bottom: 15px;">🔥 임신 관리 생활 꿀팁</h2>
                    <div style="background: #fff3cd; padding: 20px; border-radius: 8px; border-left: 4px solid #ffc107;">
                        <ul style="line-height: 2; color: #666; margin-left: 20px;">
                            <li><strong>임신 앱 활용:</strong> 베이비타임, 맘스다이어리 등으로 주차별 태아 발달 정보 실시간 확인</li>
                            <li><strong>산전 관리 일정:</strong> 임신 전반기 4주마다, 후반기 2주마다, 36주 이후 매주 병원 방문</li>
                            <li><strong>출산 준비물 타이밍:</strong> 32주부터 준비 시작, 36주까지 완료하여 조기 진통에 대비</li>
                            <li><strong>태동 카운트:</strong> 28주부터 하루 2회, 태동 10회 느끼는 시간을 기록하여 태아 건강 체크</li>
                            <li><strong>몸무게 관리:</strong> 임신 전 BMI별로 권장 체중 증가량이 다르니 의료진과 상담 필수</li>
                            <li><strong>출산휴가 계획:</strong> 예정일 6주 전부터 휴가 가능, 직장과 미리 조율하여 업무 인수인계</li>
                        </ul>
                    </div>
                </div>

                <!-- 4. 한국형 맞춤 특화 -->
                <div class="korean-special-section">
                    <h2 style="color: #333; font-size: 24px; margin-bottom: 15px;">📚 관련 용어 정리</h2>
                    <div style="background: #e8f4fd; padding: 20px; border-radius: 8px; border-left: 4px solid #007bff;">
                        <p style="line-height: 1.8; color: #666; margin-bottom: 10px;">
                            <strong>✅ 국가 지원 혜택 연계:</strong> 임신·출산 지원금, 첫만남이용권, 산모신생아 건강관리사 신청 시기 안내<br>
                            <strong>✅ 한국 산전관리 시스템:</strong> 산모수첩, 국가건강검진, 임신·출산 진료비 지원 등 한국 의료 시스템 반영<br>
                            <strong>✅ 전통 문화 일정:</strong> 태몽, 태교, 산후조리원 예약 시기 등 한국 전통 임신·출산 문화 고려<br>
                            <strong>✅ 직장맘 지원 정보:</strong> 출산전후휴가(90일), 배우자 출산휴가(10일), 육아휴직 신청 일정 가이드<br>
                            <strong>✅ 100일·돌잔치 준비:</strong> 출산 후 100일, 첫 돌잔치 등 한국 전통 기념일 일정 자동 계산
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 날짜 파싱 함수
        function parseDate(input) {
            if (!input) return null;
            
            input = input.trim().toLowerCase();
            
            // 특수 날짜들
            const today = new Date();
            
            if (input === '오늘' || input === 'today') return today;
            if (input === '어제' || input === 'yesterday') {
                const yesterday = new Date(today);
                yesterday.setDate(yesterday.getDate() - 1);
                return yesterday;
            }
            
            // 한국어 날짜 형식 (2024년 1월 1일)
            let koreanMatch = input.match(/(\d{4})년\s*(\d{1,2})월\s*(\d{1,2})일/);
            if (koreanMatch) {
                const year = parseInt(koreanMatch[1]);
                const month = parseInt(koreanMatch[2]) - 1; // 월은 0부터 시작
                const day = parseInt(koreanMatch[3]);
                return new Date(year, month, day);
            }
            
            // ISO 형식 또는 다른 표준 형식
            const standardDate = new Date(input);
            if (!isNaN(standardDate.getTime())) {
                return standardDate;
            }
            
            // 슬래시나 점으로 구분된 형식 (YYYY/MM/DD, YYYY.MM.DD)
            let dateMatch = input.match(/(\d{4})[\/\.\-](\d{1,2})[\/\.\-](\d{1,2})/);
            if (dateMatch) {
                const year = parseInt(dateMatch[1]);
                const month = parseInt(dateMatch[2]) - 1;
                const day = parseInt(dateMatch[3]);
                return new Date(year, month, day);
            }
            
            return null;
        }

        // 숫자 파싱 함수 (한국어 단위 지원)
        function parseNumber(input) {
            if (typeof input === 'number') return input;
            if (!input || typeof input !== 'string') return 0;
            
            // 입력값 정리
            input = input.toString().trim();
            
            // 빈 문자열 처리
            if (!input) return 0;
            
            // 퍼센트 처리 (% 제거)
            if (input.includes('%')) {
                input = input.replace(/%/g, '');
            }
            
            // 한국어 숫자 단위 처리
            const koreanUnits = {
                '천': 1000,
                '만': 10000,
                '십만': 100000,
                '백만': 1000000,
                '천만': 10000000,
                '억': 100000000,
                '조': 1000000000000
            };
            
            // 한국어 단위가 포함된 경우
            for (let [unit, multiplier] of Object.entries(koreanUnits)) {
                if (input.includes(unit)) {
                    const parts = input.split(unit);
                    const baseNumber = parseFloat(parts[0].replace(/[^0-9.,]/g, '').replace(/,/g, '')) || 0;
                    let remainder = 0;
                    if (parts[1] && parts[1].trim()) {
                        remainder = parseFloat(parts[1].replace(/[^0-9.,]/g, '').replace(/,/g, '')) || 0;
                    }
                    return baseNumber * multiplier + remainder;
                }
            }
            
            // 콤마 제거 및 언더스코어 제거
            input = input.replace(/[,_]/g, '');
            
            // 일반적인 숫자 추출 (음수 포함)
            const match = input.match(/-?\d*\.?\d+/);
            if (match) {
                const result = parseFloat(match[0]);
                return isNaN(result) ? 0 : result;
            }
            
            return 0;
        }

        // 날짜 포맷팅 함수
        function formatDate(date) {
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            
            const weekdays = ['일', '월', '화', '수', '목', '금', '토'];
            const weekday = weekdays[date.getDay()];
            
            return `${year}년 ${parseInt(month)}월 ${parseInt(day)}일 (${weekday})`;
        }

        // 계산 함수
        function calculate() {
            const lastPeriodInput = document.getElementById('lastPeriodDate').value;
            const cycleLengthInput = document.getElementById('cycleLength').value || '28';
            
            if (!lastPeriodInput) {
                alert('마지막 생리 시작일을 입력해주세요');
                return;
            }

            const lastPeriodDate = parseDate(lastPeriodInput);
            const cycleLength = parseNumber(cycleLengthInput);
            
            if (!lastPeriodDate) {
                alert('올바른 날짜 형식을 입력해주세요');
                return;
            }
            
            if (cycleLength < 21 || cycleLength > 35) {
                alert('생리 주기는 21일에서 35일 사이로 입력해주세요');
                return;
            }

            const today = new Date();
            
            // 출산예정일 계산 (마지막 생리일 + 280일)
            const dueDate = new Date(lastPeriodDate);
            dueDate.setDate(dueDate.getDate() + 280);
            
            // 임신 주수 계산
            const daysSinceLMP = Math.floor((today.getTime() - lastPeriodDate.getTime()) / (1000 * 3600 * 24));
            const weeks = Math.floor(daysSinceLMP / 7);
            const days = daysSinceLMP % 7;
            
            // 출산까지 남은 일수
            const daysRemaining = Math.ceil((dueDate.getTime() - today.getTime()) / (1000 * 3600 * 24));

            // 결과 표시
            let weeksText;
            if (weeks < 0) {
                weeksText = '임신 전 단계';
            } else if (weeks >= 40) {
                weeksText = `${weeks}주 ${days}일 (예정일 초과)`;
            } else {
                weeksText = `${weeks}주 ${days}일`;
            }
            
            document.getElementById('pregnancyWeeks').textContent = weeksText;
            document.getElementById('dueDate').textContent = formatDate(dueDate);
            
            let remainingText;
            if (daysRemaining > 0) {
                remainingText = `${daysRemaining}일 남음`;
            } else if (daysRemaining === 0) {
                remainingText = '오늘이 예정일입니다!';
            } else {
                remainingText = `예정일 ${Math.abs(daysRemaining)}일 지남`;
            }
            document.getElementById('daysRemaining').textContent = remainingText;
            
            document.getElementById('resultSection').classList.add('fade-in');
        }

        // 엔터키로 계산
        document.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                calculate();
            }
        });
    </script>
</body>
</html>