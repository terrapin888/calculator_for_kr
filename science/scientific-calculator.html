<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê³¼í•™ê³„ì‚°ê¸° - ê³ ê¸‰ ìˆ˜í•™ ê³„ì‚° | ìŠ¤ë§ˆíŠ¸ íŒŒì‹±</title>
    <meta name="description" content="ê³¼í•™ê³„ì‚°ê¸°ë¡œ ì‚¼ê°í•¨ìˆ˜, ë¡œê·¸, ì§€ìˆ˜, í†µê³„ ë“± ê³ ê¸‰ ìˆ˜í•™ ê³„ì‚°ì„ í•˜ì„¸ìš”. ìˆ˜ì‹ì„ ììœ  í˜•ì‹ìœ¼ë¡œ ì…ë ¥í•˜ë©´ ìë™ ì¸ì‹í•´ì„œ ì •í™•í•œ ê²°ê³¼ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.">
       <!-- ì´ 3ì¤„ ì¶”ê°€ -->
   <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
   <link rel="stylesheet" href="../../css/common.css">
   <link rel="stylesheet" href="../../css/calculator.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Malgun Gothic', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.15);
            overflow: hidden;
            animation: slideUp 0.6s ease-out;
        }
        
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: pulse 4s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }
        
        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }
        
        .content {
            padding: 40px 30px;
        }
        
        .calculator-display {
            background: #1a1a1a;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: inset 0 5px 15px rgba(0,0,0,0.3);
        }
        
        .display-screen {
            background: #000;
            border-radius: 10px;
            padding: 20px;
            color: #00ff00;
            font-family: 'Courier New', monospace;
            font-size: 24px;
            min-height: 100px;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            border: 2px solid #333;
        }
        
        .expression {
            font-size: 16px;
            color: #888;
            margin-bottom: 10px;
            word-break: break-all;
        }
        
        .result {
            font-size: 32px;
            font-weight: bold;
            color: #00ff00;
            text-align: right;
            word-break: break-all;
        }
        
        .input-section {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            border: 2px solid #e9ecef;
        }
        
        .input-label {
            font-size: 1.2rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .expression-input {
            width: 100%;
            padding: 20px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 18px;
            font-family: 'Courier New', monospace;
            background: white;
            transition: all 0.3s ease;
        }
        
        .expression-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .button-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 10px;
            margin-top: 20px;
        }
        
        .calc-btn {
            padding: 15px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            color: white;
            position: relative;
            overflow: hidden;
        }
        
        .calc-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255,255,255,0.3);
            border-radius: 50%;
            transition: all 0.3s ease;
            transform: translate(-50%, -50%);
        }
        
        .calc-btn:hover::before {
            width: 200px;
            height: 200px;
        }
        
        .calc-btn:active {
            transform: scale(0.95);
        }
        
        .btn-number {
            background: linear-gradient(135deg, #495057 0%, #6c757d 100%);
        }
        
        .btn-operator {
            background: linear-gradient(135deg, #fd7e14 0%, #e8590c 100%);
        }
        
        .btn-function {
            background: linear-gradient(135deg, #6f42c1 0%, #563d7c 100%);
        }
        
        .btn-special {
            background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
        }
        
        .btn-equals {
            background: linear-gradient(135deg, #28a745 0%, #1e7e34 100%);
            grid-column: span 2;
        }
        
        .examples {
            background: linear-gradient(135deg, #fff3e0 0%, #ffeaa7 100%);
            border-radius: 10px;
            padding: 20px;
            margin: 25px 0;
            border-left: 4px solid #f39c12;
        }
        
        .examples h4 {
            color: #d68910;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }
        
        .examples-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }
        
        .example-item {
            background: rgba(255,255,255,0.7);
            padding: 15px;
            border-radius: 8px;
            font-size: 0.9rem;
        }
        
        .example-title {
            font-weight: bold;
            color: #d68910;
            margin-bottom: 8px;
        }
        
        .example-formula {
            font-family: 'Courier New', monospace;
            background: rgba(0,0,0,0.1);
            padding: 5px;
            border-radius: 4px;
            margin: 5px 0;
        }
        
        .functions-reference {
            background: white;
            border-radius: 12px;
            padding: 25px;
            margin-top: 25px;
            box-shadow: 0 3px 15px rgba(0,0,0,0.1);
        }
        
        .reference-title {
            font-size: 1.3rem;
            font-weight: bold;
            color: #333;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .function-categories {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }
        
        .function-category {
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 15px;
        }
        
        .category-title {
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
            border-bottom: 1px solid #e9ecef;
            padding-bottom: 5px;
        }
        
        .function-list {
            font-size: 0.9rem;
            line-height: 1.6;
        }
        
        .function-item {
            font-family: 'Courier New', monospace;
            color: #666;
            margin: 3px 0;
        }
        
        .controls {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
            margin: 25px 0;
        }
        
        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
        }
        
        .btn-danger {
            background: linear-gradient(135deg, #fd79a8 0%, #e84393 100%);
        }
        
        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 15px;
            }
            
            .header {
                padding: 30px 20px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .content {
                padding: 30px 20px;
            }
            
            .button-grid {
                grid-template-columns: repeat(4, 1fr);
            }
            
            .calc-btn {
                padding: 12px;
                font-size: 14px;
            }
            
            .display-screen {
                font-size: 18px;
            }
            
            .result {
                font-size: 24px;
            }
            
            .controls {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                width: 100%;
                max-width: 300px;
            }
        }
    </style>
</head>
<body>
       <!-- ì´ í—¤ë” ë¶€ë¶„ ì¶”ê°€ -->
   <header class="header">
       <div class="header-content">
           <a href="../../index.html" class="logo">
               <div class="logo-icon">ğŸ§®</div>
               CalcHub
           </a>
           <nav class="nav-links">
               <a href="../../index.html" class="nav-link">í™ˆ</a>
               <a href="../business/" class="nav-link">ğŸ’¼ ë¹„ì¦ˆë‹ˆìŠ¤</a>
           </nav>
       </div>
   </header>
    <div class="container">
        <div class="header">
            <h1>ğŸ”¬ ê³¼í•™ê³„ì‚°ê¸°</h1>
            <p>ê³ ê¸‰ ìˆ˜í•™ í•¨ìˆ˜ì™€ ê³µí•™ ê³„ì‚°ì„ ì§€ì›í•˜ëŠ” ìŠ¤ë§ˆíŠ¸ ê³„ì‚°ê¸°</p>
        </div>
        
        <div class="content">
            <div class="calculator-display">
                <div class="display-screen">
                    <div class="expression" id="expressionDisplay">ìˆ˜ì‹ì„ ì…ë ¥í•˜ì„¸ìš”</div>
                    <div class="result" id="resultDisplay">0</div>
                </div>
            </div>
            
            <div class="input-section">
                <div class="input-label">
                    <span>ğŸ“</span>
                    ìˆ˜ì‹ ì…ë ¥ (ììœ  í˜•ì‹)
                </div>
                <input type="text" class="expression-input" id="expressionInput" 
                       placeholder="ì˜ˆ: sin(30Â°), log(100), sqrt(16), 2^3, 3*pi..." 
                       oninput="updateExpression()" onkeydown="handleKeyPress(event)">
                
                <div class="button-grid">
                    <!-- ìˆ«ì ë° ê¸°ë³¸ ì—°ì‚° -->
                    <button class="calc-btn btn-special" onclick="clearAll()">C</button>
                    <button class="calc-btn btn-special" onclick="clearEntry()">CE</button>
                    <button class="calc-btn btn-special" onclick="backspace()">âŒ«</button>
                    <button class="calc-btn btn-operator" onclick="appendToExpression('/')">/</button>
                    <button class="calc-btn btn-function" onclick="appendToExpression('sqrt(')">âˆš</button>
                    <button class="calc-btn btn-function" onclick="appendToExpression('^')"">x^y</button>
                    
                    <button class="calc-btn btn-number" onclick="appendToExpression('7')">7</button>
                    <button class="calc-btn btn-number" onclick="appendToExpression('8')">8</button>
                    <button class="calc-btn btn-number" onclick="appendToExpression('9')">9</button>
                    <button class="calc-btn btn-operator" onclick="appendToExpression('*')">Ã—</button>
                    <button class="calc-btn btn-function" onclick="appendToExpression('sin(')">sin</button>
                    <button class="calc-btn btn-function" onclick="appendToExpression('cos(')">cos</button>
                    
                    <button class="calc-btn btn-number" onclick="appendToExpression('4')">4</button>
                    <button class="calc-btn btn-number" onclick="appendToExpression('5')">5</button>
                    <button class="calc-btn btn-number" onclick="appendToExpression('6')">6</button>
                    <button class="calc-btn btn-operator" onclick="appendToExpression('-')">-</button>
                    <button class="calc-btn btn-function" onclick="appendToExpression('tan(')">tan</button>
                    <button class="calc-btn btn-function" onclick="appendToExpression('log(')">log</button>
                    
                    <button class="calc-btn btn-number" onclick="appendToExpression('1')">1</button>
                    <button class="calc-btn btn-number" onclick="appendToExpression('2')">2</button>
                    <button class="calc-btn btn-number" onclick="appendToExpression('3')">3</button>
                    <button class="calc-btn btn-operator" onclick="appendToExpression('+')">+</button>
                    <button class="calc-btn btn-function" onclick="appendToExpression('ln(')">ln</button>
                    <button class="calc-btn btn-function" onclick="appendToExpression('!')">n!</button>
                    
                    <button class="calc-btn btn-number" onclick="appendToExpression('0')">0</button>
                    <button class="calc-btn btn-number" onclick="appendToExpression('.')">.</button>
                    <button class="calc-btn btn-function" onclick="appendToExpression('pi')">Ï€</button>
                    <button class="calc-btn btn-function" onclick="appendToExpression('e')">e</button>
                    <button class="calc-btn btn-function" onclick="appendToExpression('(')">(</button>
                    <button class="calc-btn btn-function" onclick="appendToExpression(')')">)</button>
                    
                    <button class="calc-btn btn-equals" onclick="calculateExpression()">=</button>
                    <button class="calc-btn btn-function" onclick="appendToExpression('abs(')">|x|</button>
                    <button class="calc-btn btn-function" onclick="appendToExpression('mod')"">mod</button>
                    <button class="calc-btn btn-function" onclick="appendToExpression('Â°')">Â°</button>
                </div>
            </div>

            <div class="examples">
                <h4>ğŸ’¡ ìˆ˜ì‹ ì…ë ¥ ì˜ˆì‹œ</h4>
                <div class="examples-grid">
                    <div class="example-item">
                        <div class="example-title">ì‚¼ê°í•¨ìˆ˜</div>
                        <div class="example-formula">sin(30Â°), cos(Ï€/4)</div>
                        <div class="example-formula">tan(45), asin(0.5)</div>
                    </div>
                    <div class="example-item">
                        <div class="example-title">ë¡œê·¸ ë° ì§€ìˆ˜</div>
                        <div class="example-formula">log(100), ln(e)</div>
                        <div class="example-formula">2^3, sqrt(16)</div>
                    </div>
                    <div class="example-item">
                        <div class="example-title">ë³µí•© ê³„ì‚°</div>
                        <div class="example-formula">sin(30Â°) + cos(60Â°)</div>
                        <div class="example-formula">(2+3)*sqrt(25)</div>
                    </div>
                    <div class="example-item">
                        <div class="example-title">ìƒìˆ˜ ë° íŒ©í† ë¦¬ì–¼</div>
                        <div class="example-formula">pi * r^2</div>
                        <div class="example-formula">5!, e^2</div>
                    </div>
                </div>
            </div>

            <div class="controls">
                <button class="btn" onclick="calculateExpression()">ğŸ”¬ ê³„ì‚°í•˜ê¸°</button>
                <button class="btn btn-secondary" onclick="showExampleExpression()">ğŸ“ ì˜ˆì‹œ ì…ë ¥</button>
                <button class="btn btn-danger" onclick="clearAll()">ğŸ—‘ï¸ ì „ì²´ ì§€ìš°ê¸°</button>
            </div>

            <div class="functions-reference">
                <div class="reference-title">ğŸ“š ì§€ì›í•˜ëŠ” í•¨ìˆ˜ ëª©ë¡</div>
                <div class="function-categories">
                    <div class="function-category">
                        <div class="category-title">ì‚¼ê°í•¨ìˆ˜</div>
                        <div class="function-list">
                            <div class="function-item">sin(x), cos(x), tan(x)</div>
                            <div class="function-item">asin(x), acos(x), atan(x)</div>
                            <div class="function-item">sinh(x), cosh(x), tanh(x)</div>
                        </div>
                    </div>
                    <div class="function-category">
                        <div class="category-title">ë¡œê·¸ ë° ì§€ìˆ˜</div>
                        <div class="function-list">
                            <div class="function-item">log(x) - ìƒìš©ë¡œê·¸</div>
                            <div class="function-item">ln(x) - ìì—°ë¡œê·¸</div>
                            <div class="function-item">exp(x) - e^x</div>
                            <div class="function-item">x^y - ê±°ë“­ì œê³±</div>
                        </div>
                    </div>
                    <div class="function-category">
                        <div class="category-title">ê¸°ë³¸ í•¨ìˆ˜</div>
                        <div class="function-list">
                            <div class="function-item">sqrt(x) - ì œê³±ê·¼</div>
                            <div class="function-item">abs(x) - ì ˆëŒ“ê°’</div>
                            <div class="function-item">ceil(x) - ì˜¬ë¦¼</div>
                            <div class="function-item">floor(x) - ë‚´ë¦¼</div>
                            <div class="function-item">round(x) - ë°˜ì˜¬ë¦¼</div>
                        </div>
                    </div>
                    <div class="function-category">
                        <div class="category-title">ìƒìˆ˜ ë° ê¸°íƒ€</div>
                        <div class="function-list">
                            <div class="function-item">pi (Ï€) - ì›ì£¼ìœ¨</div>
                            <div class="function-item">e - ìì—°ìƒìˆ˜</div>
                            <div class="function-item">x! - íŒ©í† ë¦¬ì–¼</div>
                            <div class="function-item">x mod y - ë‚˜ë¨¸ì§€</div>
                            <div class="function-item">Â° - ë„ ë‹¨ìœ„</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        class ScientificCalculator {
            constructor() {
                this.currentExpression = '';
                this.lastResult = 0;
                this.angleMode = 'degree'; // 'degree' or 'radian'
            }
            
            // ìˆ˜ì‹ ì •ê·œí™” ë° ë³€í™˜
            normalizeExpression(expr) {
                let normalized = expr.toString();
                
                // í•œê¸€ í•¨ìˆ˜ëª… ë³€í™˜
                normalized = normalized.replace(/ì‚¬ì¸/g, 'sin');
                normalized = normalized.replace(/ì½”ì‚¬ì¸/g, 'cos');
                normalized = normalized.replace(/íƒ„ì  íŠ¸/g, 'tan');
                normalized = normalized.replace(/ë¡œê·¸/g, 'log');
                normalized = normalized.replace(/ìì—°ë¡œê·¸/g, 'ln');
                normalized = normalized.replace(/ì œê³±ê·¼/g, 'sqrt');
                normalized = normalized.replace(/ì ˆëŒ“ê°’/g, 'abs');
                
                // ê³±ì…ˆ ê¸°í˜¸ ì •ê·œí™”
                normalized = normalized.replace(/Ã—/g, '*');
                normalized = normalized.replace(/Ã·/g, '/');
                
                // ê±°ë“­ì œê³± ê¸°í˜¸ ë³€í™˜
                normalized = normalized.replace(/\^/g, '**');
                
                // ìƒìˆ˜ ë³€í™˜
                normalized = normalized.replace(/Ï€|íŒŒì´/g, Math.PI.toString());
                normalized = normalized.replace(/(?<![\w])e(?![a-zA-Z])/g, Math.E.toString());
                
                // ì•”ì‹œì  ê³±ì…ˆ ì¶”ê°€ (ì˜ˆ: 2pi -> 2*pi, 3(4+5) -> 3*(4+5))
                normalized = normalized.replace(/(\d)\(/g, '$1*(');
                normalized = normalized.replace(/(\))(\d)/g, '$1*$2');
                normalized = normalized.replace(/(\d)(sin|cos|tan|log|ln|sqrt|abs)/g, '$1*$2');
                
                return normalized;
            }
            
            // ê°ë„ë¥¼ ë¼ë””ì•ˆìœ¼ë¡œ ë³€í™˜
            toRadians(degrees) {
                return degrees * (Math.PI / 180);
            }
            
            // íŒ©í† ë¦¬ì–¼ ê³„ì‚°
            factorial(n) {
                if (n < 0) return NaN;
                if (n === 0 || n === 1) return 1;
                let result = 1;
                for (let i = 2; i <= n; i++) {
                    result *= i;
                }
                return result;
            }
            
            // ì‚¼ê°í•¨ìˆ˜ ì²˜ë¦¬ (ë„ ë‹¨ìœ„ ì§€ì›)
            processTrigFunctions(expr) {
                // sin, cos, tan í•¨ìˆ˜ì—ì„œ ë„ ë‹¨ìœ„ ì²˜ë¦¬
                expr = expr.replace(/sin\(([^)]+)Â°\)/g, (match, angle) => {
                    return `Math.sin(${this.toRadians(parseFloat(angle))})`;
                });
                expr = expr.replace(/cos\(([^)]+)Â°\)/g, (match, angle) => {
                    return `Math.cos(${this.toRadians(parseFloat(angle))})`;
                });
                expr = expr.replace(/tan\(([^)]+)Â°\)/g, (match, angle) => {
                    return `Math.tan(${this.toRadians(parseFloat(angle))})`;
                });
                
                // ë¼ë””ì•ˆ ë‹¨ìœ„ ì‚¼ê°í•¨ìˆ˜
                expr = expr.replace(/sin\(/g, 'Math.sin(');
                expr = expr.replace(/cos\(/g, 'Math.cos(');
                expr = expr.replace(/tan\(/g, 'Math.tan(');
                expr = expr.replace(/asin\(/g, 'Math.asin(');
                expr = expr.replace(/acos\(/g, 'Math.acos(');
                expr = expr.replace(/atan\(/g, 'Math.atan(');
                
                return expr;
            }
            
            // ìˆ˜í•™ í•¨ìˆ˜ ì²˜ë¦¬
            processMathFunctions(expr) {
                // ë¡œê·¸ í•¨ìˆ˜
                expr = expr.replace(/log\(/g, 'Math.log10(');
                expr = expr.replace(/ln\(/g, 'Math.log(');
                expr = expr.replace(/exp\(/g, 'Math.exp(');
                
                // ì œê³±ê·¼ ë° ê¸°íƒ€
                expr = expr.replace(/sqrt\(/g, 'Math.sqrt(');
                expr = expr.replace(/abs\(/g, 'Math.abs(');
                expr = expr.replace(/ceil\(/g, 'Math.ceil(');
                expr = expr.replace(/floor\(/g, 'Math.floor(');
                expr = expr.replace(/round\(/g, 'Math.round(');
                
                // íŒ©í† ë¦¬ì–¼ ì²˜ë¦¬
                expr = expr.replace(/(\d+)!/g, (match, num) => {
                    return this.factorial(parseInt(num));
                });
                
                // ë‚˜ë¨¸ì§€ ì—°ì‚°
                expr = expr.replace(/(\d+)\s*mod\s*(\d+)/g, '($1 % $2)');
                
                return expr;
            }
            
            // ìˆ˜ì‹ ê³„ì‚°
            calculate(expression) {
                try {
                    if (!expression || expression.trim() === '') {
                        return '0';
                    }
                    
                    // ìˆ˜ì‹ ì •ê·œí™”
                    let normalized = this.normalizeExpression(expression);
                    
                    // ì‚¼ê°í•¨ìˆ˜ ì²˜ë¦¬
                    normalized = this.processTrigFunctions(normalized);
                    
                    // ìˆ˜í•™ í•¨ìˆ˜ ì²˜ë¦¬
                    normalized = this.processMathFunctions(normalized);
                    
                    // ì•ˆì „í•œ ê³„ì‚°ì„ ìœ„í•œ ê²€ì¦
                    if (this.containsDangerousCode(normalized)) {
                        throw new Error('ì˜ëª»ëœ ìˆ˜ì‹ì…ë‹ˆë‹¤.');
                    }
                    
                    // ê³„ì‚° ì‹¤í–‰
                    const result = Function('"use strict"; return (' + normalized + ')')();
                    
                    if (isNaN(result)) {
                        return 'Error: ì •ì˜ë˜ì§€ ì•ŠìŒ';
                    }
                    
                    if (!isFinite(result)) {
                        return result > 0 ? 'âˆ' : '-âˆ';
                    }
                    
                    // ê²°ê³¼ í¬ë§·íŒ…
                    return this.formatResult(result);
                    
                } catch (error) {
                    return 'Error: ' + error.message;
                }
            }
            
            // ìœ„í—˜í•œ ì½”ë“œ ê²€ì¦
            containsDangerousCode(expr) {
                const dangerousPatterns = [
                    /eval/i,
                    /function/i,
                    /window/i,
                    /document/i,
                    /alert/i,
                    /console/i,
                    /setTimeout/i,
                    /setInterval/i
                ];
                
                return dangerousPatterns.some(pattern => pattern.test(expr));
            }
            
            // ê²°ê³¼ í¬ë§·íŒ…
            formatResult(result) {
                // ë§¤ìš° ì‘ì€ ìˆ˜ëŠ” 0ìœ¼ë¡œ ì²˜ë¦¬ (ë¶€ë™ì†Œìˆ˜ì  ì˜¤ì°¨ ì œê±°)
                if (Math.abs(result) < 1e-10) {
                    return '0';
                }
                
                // ì •ìˆ˜ì¸ ê²½ìš°
                if (Number.isInteger(result)) {
                    return result.toLocaleString();
                }
                
                // ì†Œìˆ˜ì¸ ê²½ìš° (ìµœëŒ€ 10ìë¦¬)
                const rounded = parseFloat(result.toPrecision(10));
                return rounded.toString();
            }
        }

        const calculator = new ScientificCalculator();

        function updateExpression() {
            const input = document.getElementById('expressionInput');
            const expressionDisplay = document.getElementById('expressionDisplay');
            
            calculator.currentExpression = input.value;
            expressionDisplay.textContent = input.value || 'ìˆ˜ì‹ì„ ì…ë ¥í•˜ì„¸ìš”';
        }

        function appendToExpression(value) {
            const input = document.getElementById('expressionInput');
            input.value += value;
            updateExpression();
            input.focus();
        }

        function calculateExpression() {
            const expression = calculator.currentExpression;
            const result = calculator.calculate(expression);
            
            document.getElementById('resultDisplay').textContent = result;
            
            // ê²°ê³¼ê°€ ìˆ«ìì¸ ê²½ìš° ë§ˆì§€ë§‰ ê²°ê³¼ë¡œ ì €ì¥
            if (!result.startsWith('Error') && !isNaN(parseFloat(result.replace(/,/g, '')))) {
                calculator.lastResult = parseFloat(result.replace(/,/g, ''));
            }
        }

        function clearAll() {
            calculator.currentExpression = '';
            document.getElementById('expressionInput').value = '';
            document.getElementById('expressionDisplay').textContent = 'ìˆ˜ì‹ì„ ì…ë ¥í•˜ì„¸ìš”';
            document.getElementById('resultDisplay').textContent = '0';
        }

        function clearEntry() {
            const input = document.getElementById('expressionInput');
            input.value = '';
            updateExpression();
            document.getElementById('resultDisplay').textContent = '0';
        }

        function backspace() {
            const input = document.getElementById('expressionInput');
            input.value = input.value.slice(0, -1);
            updateExpression();
        }

        function showExampleExpression() {
            const examples = [
                'sin(30Â°) + cos(60Â°)',
                'sqrt(16) + log(100)',
                '2^3 * pi',
                'ln(e) + 5!',
                '(2+3) * sqrt(25)',
                'abs(-10) + ceil(4.2)'
            ];
            
            const randomExample = examples[Math.floor(Math.random() * examples.length)];
            document.getElementById('expressionInput').value = randomExample;
            updateExpression();
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                calculateExpression();
            } else if (event.key === 'Escape') {
                clearAll();
            }
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì˜ˆì‹œ ìˆ˜ì‹
        window.addEventListener('load', function() {
            showExampleExpression();
            
            // 2ì´ˆ í›„ ìë™ ê³„ì‚°
            setTimeout(() => {
                calculateExpression();
            }, 2000);
        });

        // ì…ë ¥ì°½ì— í¬ì»¤ìŠ¤
        document.getElementById('expressionInput').focus();
    </script>
</body>
</html>
