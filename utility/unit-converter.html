<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>단위 변환기 - 무료 온라인 길이 무게 온도 변환 | CalcHub</title>
    <meta name="description" content="무료 단위 변환기로 길이, 무게, 온도, 부피 단위를 즉시 변환하세요. cm와 인치, kg과 파운드, 섭씨와 화씨, 리터와 갤런 등 상용 단위 변환. 과학, 공학, 요리, 여행 등에 필수적.">
    <meta name="keywords" content="온라인계산기, 무료계산기, 단위변환기, 길이변환기, 무게변환기, 온도변환기, 부피변환기, 인치cm변환기, 파운드kg변환기, 섭씨화씨변환기, 리터갤런변환기">
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/common.css">
</head>
<body>
    <!-- 공통 헤더 -->
    <header class="header">
        <div class="header-content">
            <a href="../index.html" class="logo">
                <div class="logo-icon">🧮</div>
                CalcHub
            </a>
            <nav class="nav-links">
                <a href="../index.html#calculators" class="nav-link">계산기</a>
                <a href="../about.html" class="nav-link">소개</a>
                <a href="../contact.html" class="nav-link">문의</a>
            </nav>
        </div>
    </header>

    <div class="container">
        <div class="calculator-card">
            <!-- 계산기 헤더 -->
            <div class="calculator-header">
                <h1 class="calculator-title">단위 변환기</h1>
                <p class="calculator-subtitle">다양한 단위를 간편하게 변환하세요</p>
            </div>

            <!-- 계산기 본문 -->
            <div class="calculator-body">
                <!-- 입력 섹션 -->
                <div class="input-section">
                    <h2 class="section-title">변환 정보</h2>
                    <div class="input-grid">
                        <div class="input-group">
                            <label for="unitType" class="input-label">단위 종류</label>
                            <select id="unitType" class="input-field" onchange="updateUnitOptions()">
                                <option value="length">길이</option>
                                <option value="weight">무게</option>
                                <option value="temperature">온도</option>
                                <option value="volume">부피</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label for="fromValue" class="input-label">변환할 값</label>
                            <input type="text" id="fromValue" class="input-field" placeholder="예: 100" oninput="convert()">
                        </div>
                    </div>
                    <div class="input-grid">
                        <div class="input-group">
                            <label for="fromUnit" class="input-label">원본 단위</label>
                            <select id="fromUnit" class="input-field" onchange="convert()">
                                <!-- 동적으로 채워짐 -->
                            </select>
                        </div>
                        <div class="input-group">
                            <label for="toUnit" class="input-label">변환 단위</label>
                            <select id="toUnit" class="input-field" onchange="convert()">
                                <!-- 동적으로 채워짐 -->
                            </select>
                        </div>
                    </div>
                </div>

                <!-- 결과 섹션 -->
                <div id="resultSection" class="result-section">
                    <h2 class="result-title">변환 결과</h2>
                    <div class="result-grid">
                        <div class="result-item">
                            <div class="result-label">변환 결과</div>
                            <div id="convertedValue" class="result-value highlight">-</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 단위 정의
        const units = {
            length: {
                name: '길이',
                units: {
                    'm': { name: '미터 (m)', factor: 1 },
                    'cm': { name: '센티미터 (cm)', factor: 0.01 },
                    'mm': { name: '밀리미터 (mm)', factor: 0.001 },
                    'km': { name: '킬로미터 (km)', factor: 1000 },
                    'inch': { name: '인치 (inch)', factor: 0.0254 },
                    'ft': { name: '피트 (ft)', factor: 0.3048 },
                    'yard': { name: '야드 (yard)', factor: 0.9144 }
                }
            },
            weight: {
                name: '무게',
                units: {
                    'kg': { name: '킬로그램 (kg)', factor: 1 },
                    'g': { name: '그램 (g)', factor: 0.001 },
                    'mg': { name: '밀리그램 (mg)', factor: 0.000001 },
                    'ton': { name: '톤 (ton)', factor: 1000 },
                    'lb': { name: '파운드 (lb)', factor: 0.453592 },
                    'oz': { name: '온스 (oz)', factor: 0.0283495 }
                }
            },
            temperature: {
                name: '온도',
                units: {
                    'celsius': { name: '섭씨 (°C)' },
                    'fahrenheit': { name: '화씨 (°F)' },
                    'kelvin': { name: '켈빈 (K)' }
                }
            },
            volume: {
                name: '부피',
                units: {
                    'l': { name: '리터 (L)', factor: 1 },
                    'ml': { name: '밀리리터 (mL)', factor: 0.001 },
                    'gallon': { name: '갤런 (gallon)', factor: 3.78541 },
                    'cup': { name: '컵 (cup)', factor: 0.236588 }
                }
            }
        };

        // 숫자 파싱 함수
        function parseNumber(input) {
            if (!input || typeof input !== 'string') return 0;
            
            // 원본 보관 (퍼센트 체크용)
            const original = input.trim();
            
            // 기본 정리 (쉼표, 공백, 언더스코어 제거)
            input = input.replace(/[,\s_]/g, '').toLowerCase();
            
            // 퍼센트 처리 (%, percent, 퍼센트)
            let isPercent = false;
            if (input.includes('%') || input.includes('percent') || input.includes('퍼센트')) {
                isPercent = true;
                input = input.replace(/(%|percent|퍼센트)/g, '');
            }
            
            // 한국어 단위 변환 (더 많은 단위 추가)
            const units = {
                '조': 1000000000000,
                '천억': 100000000000,
                '백억': 10000000000,
                '십억': 1000000000,
                '억': 100000000,
                '천만': 10000000,
                '백만': 1000000,
                '십만': 100000,
                '만': 10000,
                '천': 1000,
                '백': 100,
                '십': 10
            };
            
            // 단위 변환 처리
            for (let unit in units) {
                if (input.includes(unit)) {
                    const numPart = input.replace(unit, '');
                    const num = parseFloat(numPart) || 1;
                    let result = num * units[unit];
                    
                    if (isPercent) result = result / 100;
                    
                    return result;
                }
            }
            
            // 일반 숫자 파싱 (소수점 고정밀도 지원)
            let parsed = parseFloat(input);
            if (isNaN(parsed)) return 0;
            
            if (isPercent) parsed = parsed / 100;
            
            return parsed;
        }

        // 단위 옵션 업데이트
        function updateUnitOptions() {
            const unitType = document.getElementById('unitType').value;
            const fromUnit = document.getElementById('fromUnit');
            const toUnit = document.getElementById('toUnit');
            
            // 기존 옵션 제거
            fromUnit.innerHTML = '';
            toUnit.innerHTML = '';
            
            // 새로운 옵션 추가
            const unitOptions = units[unitType].units;
            for (let key in unitOptions) {
                const option1 = new Option(unitOptions[key].name, key);
                const option2 = new Option(unitOptions[key].name, key);
                fromUnit.add(option1);
                toUnit.add(option2);
            }
            
            // 기본 선택값 설정
            if (unitType === 'length') {
                fromUnit.value = 'm';
                toUnit.value = 'cm';
            } else if (unitType === 'weight') {
                fromUnit.value = 'kg';
                toUnit.value = 'g';
            } else if (unitType === 'temperature') {
                fromUnit.value = 'celsius';
                toUnit.value = 'fahrenheit';
            } else if (unitType === 'volume') {
                fromUnit.value = 'l';
                toUnit.value = 'ml';
            }
            
            convert();
        }

        // 온도 변환 함수
        function convertTemperature(value, from, to) {
            let celsius;
            
            // 원본 단위를 섭씨로 변환
            if (from === 'celsius') {
                celsius = value;
            } else if (from === 'fahrenheit') {
                celsius = (value - 32) * 5/9;
            } else if (from === 'kelvin') {
                celsius = value - 273.15;
            }
            
            // 섭씨를 목표 단위로 변환
            if (to === 'celsius') {
                return celsius;
            } else if (to === 'fahrenheit') {
                return celsius * 9/5 + 32;
            } else if (to === 'kelvin') {
                return celsius + 273.15;
            }
            
            return celsius;
        }

        // 변환 함수
        function convert() {
            const fromValue = parseNumber(document.getElementById('fromValue').value);
            const unitType = document.getElementById('unitType').value;
            const fromUnit = document.getElementById('fromUnit').value;
            const toUnit = document.getElementById('toUnit').value;
            
            if (!fromValue) {
                document.getElementById('convertedValue').textContent = '-';
                return;
            }
            
            let result;
            
            if (unitType === 'temperature') {
                result = convertTemperature(fromValue, fromUnit, toUnit);
            } else {
                // 다른 단위들은 factor를 사용한 변환
                const fromFactor = units[unitType].units[fromUnit].factor;
                const toFactor = units[unitType].units[toUnit].factor;
                result = fromValue * (fromFactor / toFactor);
            }
            
            // 결과 표시 (소수점 6자리까지, 불필요한 0 제거)
            const formattedResult = parseFloat(result.toFixed(6)).toLocaleString();
            const toUnitName = units[unitType].units[toUnit].name;
            
            document.getElementById('convertedValue').textContent = `${formattedResult} ${toUnitName.split('(')[1].split(')')[0]}`;
            
            document.getElementById('resultSection').classList.add('fade-in');
        }

        // 엔터키로 변환
        document.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                convert();
            }
        });

        // 초기화
        window.onload = function() {
            updateUnitOptions();
            document.getElementById('fromValue').value = '1';
            convert();
        };
    </script>
</body>
</html>